<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>T-PACHIN · 完整卡片＋點數轉代幣</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Russo+One&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
<style>
    /* 保留所有原本的樣式 */
    .tech-gradient { background: linear-gradient(180deg, #000814 0%, #001233 50%, #001845 100%); }
    .tech-border { border: 1px solid rgba(0, 148, 255, 0.4); }
    .nav-item { position: relative; }
    .nav-badge {
        position: absolute; top: 0px; right: 0px; width: 10px; height: 10px;
        background-color: #ff3b3b; border-radius: 50%; border: 2px solid #001a33;
        box-shadow: 0 0 8px #ff0000; display: none; z-index: 25;
    }
    .nav-item.current-page .nav-badge { border-color: #0066cc; }

    .tech-tab-active {
        background: linear-gradient(90deg, #0066cc 0%, #0099ff 100%);
        border: 1px solid #00ccff;
        box-shadow: 0 0 8px rgba(0, 204, 255, 0.6);
    }
    .tab-btn {
        flex: 0 0 auto; white-space: nowrap; transition: all 0.2s ease; cursor: pointer;
        position: relative; outline: none;
    }
    .tab-btn:hover { background: rgba(0, 153, 255, 0.3) !important; transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0, 153, 255, 0.4); }
    .tab-btn:active { transform: scale(0.92) !important; background: rgba(0, 204, 255, 0.6) !important; transition: transform 0.08s, background 0.08s; }
    .tab-btn:focus-visible { outline: 3px solid #00ccff; outline-offset: 2px; }
    
    .game-card-bg {
        background: linear-gradient(180deg, rgba(0, 30, 60, 0.8) 0%, rgba(0, 15, 30, 0.9) 100%);
        transition: all 0.25s ease; cursor: pointer; position: relative; outline: none;
        border: 1px solid rgba(0, 148, 255, 0.4);
        border-radius: 0.75rem;
        overflow: hidden;
    }
    .game-card-bg:hover { transform: translateY(-4px); box-shadow: 0 8px 20px rgba(0, 153, 255, 0.5); border-color: #00ccff; }
    .game-card-bg:active { transform: scale(0.96) translateY(-2px); box-shadow: 0 4px 15px rgba(0, 204, 255, 0.7); transition: transform 0.08s, box-shadow 0.08s; }
    
    .favorite-btn {
        transition: all 0.2s ease; cursor: pointer; background: rgba(0, 40, 70, 0.6);
        border: 1px solid rgba(0, 148, 255, 0.4); border-radius: 9999px; width: 1.75rem; height: 1.75rem;
        display: flex; align-items: center; justify-content: center; color: #9ca3af; outline: none;
    }
    .favorite-btn:hover { background: rgba(220, 38, 38, 0.25); color: #ef4444; border-color: #ef4444; transform: scale(1.15); box-shadow: 0 0 18px rgba(239, 68, 68, 0.5); }
    .favorite-btn:active { transform: scale(0.82); background: rgba(220, 38, 38, 0.5); color: #ffffff; }
    .favorite-btn.active { color: #ef4444; background: rgba(220, 38, 38, 0.25); border-color: #ef4444; box-shadow: 0 0 15px #ef4444; animation: heartPop 0.3s ease; }
    @keyframes heartPop { 0% { transform: scale(1); } 50% { transform: scale(1.3); } 100% { transform: scale(1); } }
    
    .enter-btn {
        transition: all 0.2s ease; cursor: pointer; background: rgba(0, 102, 204, 0.2);
        border: 1px solid rgba(0, 148, 255, 0.4); border-radius: 0.375rem; color: #0099ff;
        font-size: 0.75rem; padding: 0.25rem 0; flex: 1; outline: none; font-weight: 500;
    }
    .enter-btn:hover { background: linear-gradient(90deg, #0066cc, #0099ff); color: white; border-color: #80e4ff; box-shadow: 0 0 18px #00ccff; transform: translateY(-2px); }
    .enter-btn:active { transform: scale(0.9); background: #0066cc; }
    .enter-btn.maintenance {
        background: rgba(100, 100, 100, 0.2);
        color: #666;
        border-color: #444;
        pointer-events: none;
        cursor: not-allowed;
    }
    
    .new-machine-badge { position: absolute; top: 8px; right: 8px; z-index: 10; max-width: 100px; }
    .filter-drawer {
        position: fixed; top: 0; right: -100%; width: 85%; max-width: 340px; height: 100vh;
        background: linear-gradient(165deg, #001a33 0%, #000a1a 100%);
        border-left: 2px solid #0099ff; box-shadow: -5px 0 30px rgba(0, 153, 255, 0.5);
        z-index: 10000; transition: right 0.3s ease; overflow-y: auto; padding: 1.5rem;
    }
    .filter-drawer.open { right: 0; }
    .drawer-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.7); backdrop-filter: blur(3px); z-index: 9999; display: none; }
    .drawer-overlay.open { display: block; }
    
    .filter-chip { background: rgba(0, 40, 70, 0.8); border: 1px solid #0099ff60; border-radius: 9999px; padding: 0.4rem 1.2rem; font-size: 0.75rem; color: #cce6ff; transition: all 0.2s ease; cursor: pointer; display: inline-block; user-select: none; }
    .filter-chip:hover { background: #0077cc; color: white; border-color: #80e4ff; transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0, 153, 255, 0.4); }
    .filter-chip.selected { background: #0099ff; color: white; border-color: white; font-weight: 500; box-shadow: 0 0 15px #00ccff; }
    
    .bottom-nav {
        background: #001a33; border-top: 2px solid #0066cc; box-shadow: 0 -2px 10px rgba(0, 102, 204, 0.3);
        width: 100%; max-width: 448px; padding: 0.75rem 1.5rem; position: fixed; bottom: 0; left: 50%; transform: translateX(-50%); z-index: 50;
    }
    .nav-item { display: flex; flex-direction: column; align-items: center; color: #4b9cd3; transition: all 0.2s ease; border-radius: 8px; padding: 0.25rem 0.5rem; text-decoration: none; outline: none; cursor: pointer; }
    .nav-item:hover { color: #80e4ff; transform: translateY(-3px); text-shadow: 0 0 8px #00ccff; background: rgba(0, 153, 255, 0.2); }
    .nav-item:active { transform: scale(0.9) translateY(-1px); color: white; background: rgba(0, 204, 255, 0.4); }
    .nav-item:focus-visible { outline: 3px solid #00ccff; outline-offset: 2px; }
    .nav-item.current-page { color: white; background: linear-gradient(90deg, #0066cc 0%, #0099ff 100%); border: 1px solid #80e4ff; box-shadow: 0 0 15px #00ccff; transform: scale(1.02); }
    
    .banner-area { width: 100%; height: 120px; background: linear-gradient(145deg, #002244, #001133); border: 1px solid #0099ff60; border-radius: 12px; overflow: hidden; position: relative; touch-action: pan-y pinch-zoom; }
    .banner-slider { display: flex; height: 100%; width: 100%; transition: transform 0.3s ease-in-out; cursor: grab; }
    .banner-slider:active { cursor: grabbing; }
    .banner-slide { flex: 0 0 100%; height: 100%; position: relative; user-select: none; pointer-events: none; }
    .banner-slide img { width: 100%; height: 100%; object-fit: cover; pointer-events: none; }
    .banner-dots { position: absolute; bottom: 8px; left: 50%; transform: translateX(-50%); display: flex; gap: 6px; z-index: 20; pointer-events: auto; }
    .banner-dot { width: 8px; height: 8px; border-radius: 50%; background: rgba(255, 255, 255, 0.5); cursor: pointer; transition: all 0.2s; border: 1px solid #0099ff60; }
    .banner-dot:hover { background: #0099ff; transform: scale(1.4); box-shadow: 0 0 10px #00ccff; }
    .banner-dot:active { transform: scale(0.9); }
    .banner-dot.active { background: #0099ff; transform: scale(1.2); box-shadow: 0 0 12px #00ccff; border-color: white; }
    .banner-touch-area { position: absolute; top: 0; left: 0; right: 0; bottom: 0; z-index: 15; background: transparent; touch-action: none; }

    .token-badge { background: linear-gradient(135deg, #fbbf24, #d97706); color: #000; font-weight: bold; padding: 0.125rem 0.5rem; border-radius: 9999px; font-size: 0.7rem; border: 1px solid #f59e0b; box-shadow: 0 0 8px rgba(245, 158, 11, 0.5); }
    .popular-badge { position: absolute; top: 8px; left: 8px; background: linear-gradient(135deg, #ef4444, #dc2626); color: white; font-size: 0.65rem; font-weight: bold; padding: 2px 8px; border-radius: 20px; z-index: 10; border: 1px solid #fca5a5; box-shadow: 0 0 10px #ef4444; }

    .tab-container { position: relative; width: 100%; overflow: hidden; touch-action: pan-y pinch-zoom; }
    .tabs-wrapper { display: flex; gap: 8px; transition: none; cursor: grab; padding: 0 4px; overflow-x: auto; scrollbar-width: none; -ms-overflow-style: none; scroll-behavior: smooth; -webkit-overflow-scrolling: touch; touch-action: pan-x pan-y; }
    .tabs-wrapper::-webkit-scrollbar { display: none; }
    .tabs-wrapper:active { cursor: grabbing; }
    .tab-indicator { position: absolute; bottom: -4px; left: 0; height: 3px; background: linear-gradient(90deg, #0099ff, #00ccff); border-radius: 3px; transition: left 0.2s ease-in-out, width 0.2s ease-in-out; box-shadow: 0 0 8px #00ccff; z-index: 5; pointer-events: none; }

    .back-to-top {
        position: fixed; bottom: 90px; right: 20px; width: 48px; height: 48px;
        background: linear-gradient(145deg, #0066cc, #0099ff); border: 2px solid #80e4ff; border-radius: 50%;
        display: flex; align-items: center; justify-content: center; color: white; font-size: 1.5rem;
        cursor: pointer; z-index: 100; opacity: 0; visibility: hidden; transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        box-shadow: 0 4px 15px rgba(0, 204, 255, 0.5); transform: scale(0.8);
    }
    .back-to-top.show { opacity: 1; visibility: visible; transform: scale(1); animation: pulse 2s infinite; }
    .back-to-top:hover { transform: scale(1.15) translateY(-5px); background: linear-gradient(145deg, #0077dd, #00aaff); box-shadow: 0 8px 25px rgba(0, 204, 255, 0.8); border-color: white; }
    .back-to-top:active { transform: scale(0.9); }
    @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(0, 204, 255, 0.7); } 70% { box-shadow: 0 0 0 15px rgba(0, 204, 255, 0); } 100% { box-shadow: 0 0 0 0 rgba(0, 204, 255, 0); } }

    .clickable { cursor: pointer; transition: all 0.1s ease; }
    .clickable:active { transform: scale(0.95); }
    .hover-glow:hover { text-shadow: 0 0 8px #00ccff; }

    .main-content { flex: 1; padding-bottom: 80px; }
    .max-w-md { padding-bottom: 0; min-height: 100vh; position: relative; }
    
    .category-title {
        color: #0099ff;
        font-weight: 500;
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        border-bottom: 1px solid rgba(0, 153, 255, 0.3);
        padding-bottom: 0.5rem;
    }
    .category-section {
        margin-bottom: 2rem;
    }

    .logo {
        display: flex; align-items: center; gap: 8px; font-family: 'Orbitron', 'Russo One', sans-serif;
        white-space: nowrap; cursor: pointer; transition: transform 0.2s ease; text-decoration: none;
        color: inherit; background: transparent; border: none; backdrop-filter: none; padding: 0;
        margin: 0; -webkit-tap-highlight-color: transparent;
    }
    .logo:active { transform: scale(0.97); }
    .logo-icon {
        width: 40px; height: 40px; background: linear-gradient(135deg, #000, #111, #222);
        border-radius: 8px; position: relative; display: flex; align-items: center; justify-content: center;
        box-shadow: 0 0 15px rgba(0, 224, 255, 0.5), inset 0 0 10px rgba(255, 215, 0, 0.2);
        overflow: hidden; border: 2px solid #ffd700; flex-shrink: 0;
    }
    .logo-icon::before {
        content: ''; position: absolute; width: 100%; height: 100%;
        background: conic-gradient(from 0deg, transparent, #00e0ff, #c90a0a, #ffd700, transparent);
        animation: logoRotate 4s linear infinite;
    }
    .logo-icon::after { content: ''; position: absolute; width: 30px; height: 30px; background: #000; border-radius: 5px; }
    @keyframes logoRotate { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
    .logo-icon-inner {
        position: relative; z-index: 2; font-size: 16px; font-weight: 900;
        background: linear-gradient(45deg, #ffdf00, #ffec8b, #00e0ff);
        -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
        letter-spacing: 0.5px; font-family: 'Orbitron', sans-serif; text-shadow: 0 0 6px rgba(255, 223, 0, 0.5);
    }
    .logo-text { display: flex; flex-direction: column; line-height: 1.1; }
    .logo-main {
        font-size: 18px; font-weight: 900;
        background: linear-gradient(45deg, #ffdf00, #ffd700, #00e0ff);
        -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
        background-size: 200% auto; animation: textShine 3s ease-in-out infinite alternate;
        letter-spacing: 1px; text-transform: uppercase; text-shadow: 0 0 8px rgba(255, 215, 0, 0.3);
        white-space: nowrap;
    }
    .logo-sub {
        font-size: 9px; color: #00e0ff; font-weight: 500; letter-spacing: 0.8px; opacity: 0.9;
        text-shadow: 0 0 4px rgba(0, 224, 255, 0.5); white-space: nowrap;
    }
    .logo:focus-visible { outline: none; }

    .slider-container {
        position: relative; width: 100%; overflow: hidden; touch-action: pan-y pinch-zoom;
        margin-bottom: 1rem;
    }
    .slider-wrapper {
        display: flex; gap: 16px; overflow-x: auto; scrollbar-width: none; -ms-overflow-style: none;
        scroll-behavior: smooth; -webkit-overflow-scrolling: touch; padding: 4px 0 12px 0; cursor: grab;
    }
    .slider-wrapper::-webkit-scrollbar { display: none; }
    .slider-wrapper:active { cursor: grabbing; }
    .slider-item {
        flex: 0 0 auto; width: calc(50% - 8px); max-width: 180px;
    }
    .slider-indicator {
        display: flex; justify-content: center; gap: 8px; margin-top: 8px;
    }
    .slider-dot {
        width: 8px; height: 8px; border-radius: 50%; background: rgba(0, 153, 255, 0.3);
        border: 1px solid rgba(0, 153, 255, 0.5); transition: all 0.2s; cursor: pointer;
    }
    .slider-dot.active {
        background: #0099ff; transform: scale(1.3); box-shadow: 0 0 10px #00ccff; border-color: white;
    }
    .slider-arrow {
        position: absolute; top: 50%; transform: translateY(-50%); width: 30px; height: 30px;
        background: rgba(0, 40, 70, 0.8); border: 1px solid #0099ff; border-radius: 50%;
        display: flex; align-items: center; justify-content: center; color: #0099ff;
        cursor: pointer; z-index: 10; transition: all 0.2s; backdrop-filter: blur(4px);
    }
    .slider-arrow:hover { background: #0099ff; color: white; transform: translateY(-50%) scale(1.1); box-shadow: 0 0 15px #00ccff; }
    .slider-arrow:active { transform: translateY(-50%) scale(0.9); }
    .slider-arrow.left { left: 5px; }
    .slider-arrow.right { right: 5px; }
    .slider-arrow.disabled { opacity: 0.3; pointer-events: none; }

    .vertical-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1rem;
        margin-top: 0.5rem;
    }
    .vertical-grid .game-card-bg {
        width: 100%;
    }

    /* 子機種彈窗樣式 */
    .machine-modal {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: rgba(0, 0, 0, 0.85); backdrop-filter: blur(6px); z-index: 20000;
        display: flex; align-items: center; justify-content: center; opacity: 0;
        visibility: hidden; transition: 0.25s; padding: 1rem;
    }
    .machine-modal.show { opacity: 1; visibility: visible; }
    .modal-content {
        background: linear-gradient(165deg, #001e3c, #00102a); border: 2px solid #0099ff;
        border-radius: 2rem; max-width: 480px; width: 100%; max-height: 80vh; overflow-y: auto;
        box-shadow: 0 20px 40px rgba(0, 153, 255, 0.5); padding: 1.5rem 1rem;
        transform: scale(0.9); transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    .machine-modal.show .modal-content { transform: scale(1); }
    .modal-header {
        display: flex; align-items: center; justify-content: space-between;
        border-bottom: 1px solid #0099ff60; padding-bottom: 0.75rem; margin-bottom: 1.2rem;
    }
    .modal-header h2 { font-size: 1.7rem; font-weight: 700; color: #ffd966; text-shadow: 0 0 8px #fbbf24; }
    .modal-close {
        background: rgba(0,102,204,0.3); border: 1px solid #0099ff; color: white; width: 36px; height: 36px;
        border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.3rem;
        cursor: pointer; transition: 0.2s;
    }
    .modal-close:hover { background: #ff3b3b; border-color: white; transform: scale(1.1); box-shadow: 0 0 15px red; }
    
    /* 子機種網格 */
    .submachine-grid { 
        display: grid; 
        grid-template-columns: 1fr 1fr; 
        gap: 0.8rem; 
    }
    
    /* 子機台卡片 */
    .sub-item-card {
        background: linear-gradient(145deg, rgba(0,40,70,0.9), rgba(0,20,45,0.95));
        border: 1px solid rgba(0, 153, 255, 0.5);
        border-radius: 1rem; 
        padding: 0.7rem 0.5rem;
        display: flex; 
        flex-direction: column; 
        box-shadow: 0 0 10px rgba(0,153,255,0.3); 
        transition: 0.15s;
        height: 100%;
        min-height: 115px;
        position: relative;
        overflow: hidden;
    }
    .sub-item-card:hover { transform: translateY(-2px); border-color: #00ccff; box-shadow: 0 0 18px #0099ff; }
    
    /* 維護中的子機台卡片 */
    .sub-item-card.maintenance {
        background: linear-gradient(145deg, rgba(70, 70, 70, 0.8), rgba(50, 50, 50, 0.9));
        border: 1px solid rgba(255, 100, 100, 0.4);
        opacity: 0.9;
        filter: grayscale(0.6);
    }
    .sub-item-card.maintenance::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: repeating-linear-gradient(
            45deg,
            rgba(255, 100, 100, 0.15) 0px,
            rgba(255, 100, 100, 0.15) 10px,
            rgba(255, 0, 0, 0.1) 10px,
            rgba(255, 0, 0, 0.1) 20px
        );
        pointer-events: none;
        z-index: 1;
    }
    
    .sub-name-ratio { 
        display: flex; 
        align-items: center; 
        justify-content: space-between; 
        margin-bottom: 0.3rem; 
        position: relative; 
        z-index: 2; 
    }
    .sub-name {
        font-weight: 600; 
        color: #b3e0ff; 
        font-size: 0.9rem; 
        white-space: nowrap;
        overflow: hidden; 
        text-overflow: ellipsis; 
        max-width: 85px;
        display: flex;
        align-items: center;
        gap: 4px;
    }
    .maintenance .sub-name { color: #ccc; }
    
    /* 子機種上的代幣標籤，以「1枚=」開頭 */
    .sub-ratio {
        background: #001c3a; 
        padding: 0.15rem 0.5rem; 
        border-radius: 30px; 
        border: 1px solid #fbbf24;
        color: #ffd966; 
        font-weight: 500; 
        font-size: 0.65rem; 
        box-shadow: 0 0 6px #fbbf24;
        white-space: nowrap;
    }
    .maintenance .sub-ratio {
        background: #333;
        border-color: #ff6666;
        color: #ff9999;
        box-shadow: 0 0 6px rgba(255, 100, 100, 0.3);
    }
    
    /* 維護中標籤 */
    .maintenance-badge {
        background: #c92a2a;
        color: white;
        font-size: 0.5rem;
        padding: 2px 4px;
        border-radius: 10px;
        border: 1px solid #ffa8a8;
        box-shadow: 0 0 5px #ff6b6b;
        animation: pulse-red 1.5s infinite;
        white-space: nowrap;
        display: inline-block;
        line-height: 1.2;
    }
    @keyframes pulse-red {
        0% { opacity: 0.7; }
        50% { opacity: 1; }
        100% { opacity: 0.7; }
    }
    
    /* 維護中日期 */
    .maintenance-date {
        font-size: 0.5rem;
        color: #ff9999;
        margin: 0.2rem 0 0.3rem 0;
        display: flex;
        align-items: center;
        gap: 2px;
        position: relative;
        z-index: 2;
        white-space: nowrap;
        min-height: 16px;
    }
    .maintenance-date i {
        font-size: 0.45rem;
    }
    
    /* 空白佔位 - 保持高度一致 */
    .placeholder-date {
        min-height: 16px;
        margin: 0.2rem 0 0.3rem 0;
    }
    
    /* 按鈕區域 */
    .sub-actions { 
        display: flex; 
        gap: 4px; 
        align-items: center; 
        margin-top: auto;
        padding-top: 0.3rem;
        position: relative; 
        z-index: 2; 
    }
    .sub-actions .enter-btn { 
        font-size: 0.7rem; 
        padding: 0.2rem 0; 
        flex: 1; 
    }
    .sub-actions .favorite-btn { 
        width: 1.7rem; 
        height: 1.7rem; 
    }

    /* 全像投影動畫 */
    @keyframes scan-line {
        0% { transform: translateY(-20px); opacity: 0; }
        50% { opacity: 1; }
        100% { transform: translateY(20px); opacity: 0; }
    }
    .animate-scan-line {
        animation: scan-line 3s ease-in-out infinite;
    }
    .animate-scan-line-delay {
        animation: scan-line 3s ease-in-out infinite 1.5s;
    }

    /* ========== 公告按鈕放在框內 (左側縮小版) ========== */
    .announcement-combo {
        background: linear-gradient(145deg, #001f3f, #001a33);
        border: 1px solid #0099ff80;
        border-radius: 9999px;
        box-shadow: 0 0 20px rgba(0, 153, 255, 0.4);
        backdrop-filter: blur(2px);
        padding: 0.25rem 0.25rem 0.25rem 0.75rem;
        display: inline-flex;
        align-items: center;
        width: 100%;
        position: relative;
        overflow: hidden;
        min-height: 42px;
    }
    .announcement-combo .hologram-lines {
        position: absolute;
        inset: 0;
        pointer-events: none;
        overflow: hidden;
        border-radius: 9999px;
    }
    .announcement-combo .hologram-lines div {
        width: 100%;
        height: 1px;
        background: rgba(0, 204, 255, 0.25);
        position: absolute;
        left: 0;
    }
    .combo-announce-btn {
        background: linear-gradient(145deg, #0066cc, #0099ff);
        border: 1px solid #80e4ff;
        border-radius: 9999px;
        padding: 0.25rem 1rem;
        font-weight: 700;
        font-size: 0.85rem;
        box-shadow: 0 0 12px #00ccff;
        transition: 0.2s;
        white-space: nowrap;
        display: inline-flex;
        align-items: center;
        gap: 6px;
        color: white;
        text-decoration: none;
        letter-spacing: 0.3px;
        margin-right: 10px;
        flex-shrink: 0;
        z-index: 2;
    }
    .combo-announce-btn:hover {
        transform: scale(1.02);
        background: linear-gradient(145deg, #0077dd, #00aaff);
        border-color: white;
        box-shadow: 0 0 20px #00ccff;
    }
    .combo-announce-btn:active { transform: scale(0.96); }
    
    .combo-marquee {
        flex: 1;
        min-width: 0;
        white-space: nowrap;
        overflow: hidden;
        color: #b3e6ff;
        font-weight: 700;
        font-size: 0.85rem;
        letter-spacing: 0.5px;
        text-shadow: 0 0 6px #0099ff;
        padding-right: 0.5rem;
        z-index: 2;
    }
    .combo-marquee marquee {
        width: 100%;
        display: inline-block;
    }

    /* ===== 點數轉代幣彈窗 (無數字滾動條) ===== */
    .convert-modal {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: rgba(0, 10, 20, 0.9); backdrop-filter: blur(8px); z-index: 25000;
        display: flex; align-items: center; justify-content: center; opacity: 0;
        visibility: hidden; transition: 0.25s; padding: 1rem;
    }
    .convert-modal.show { opacity: 1; visibility: visible; }
    .convert-content {
        background: linear-gradient(165deg, #002b4a, #001a33);
        border: 2px solid #ffd966; border-radius: 2.5rem; width: 100%; max-width: 400px;
        padding: 2rem 1.5rem; box-shadow: 0 20px 40px rgba(255, 215, 0, 0.4);
        transform: scale(0.9); transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    .convert-modal.show .convert-content { transform: scale(1); }
    .convert-header { text-align: center; margin-bottom: 1.2rem; }
    .convert-header h3 { font-size: 1.8rem; font-weight: 700; color: #ffd966; text-shadow: 0 0 10px #fbbf24; }
    .convert-header p { color: #90d0ff; font-size: 0.9rem; }
    .available-points-card {
        background: #001b2e; border-radius: 40px; padding: 1rem 1.5rem; margin-bottom: 1.8rem;
        border: 1px solid #ffd96640; display: flex; justify-content: space-between; align-items: center;
    }
    .available-points-card .label { font-size: 0.85rem; color: #9fc9ff; }
    .available-points-card .value { font-size: 2rem; font-weight: 700; color: #ffd966; line-height: 1.2; }
    
    .convert-input-group {
        background: #001c35; border: 1px solid #0099ff; border-radius: 60px;
        margin: 1rem 0 0.8rem 0;
    }
    .convert-input-group input {
        background: transparent; border: none; color: white; font-size: 1.4rem; width: 100%;
        outline: none; padding: 0.7rem 1.2rem; font-weight: 700;
        -moz-appearance: textfield;
        appearance: textfield;
    }
    .convert-input-group input::-webkit-outer-spin-button,
    .convert-input-group input::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
    }
    
    .convert-preview {
        text-align: right; margin: 0.5rem 0 1.5rem 0; padding-right: 0.5rem;
        font-size: 1.2rem; color: #ffd966;
    }
    .convert-preview span { font-size: 1.5rem; font-weight: 700; margin-left: 0.5rem; }
    .convert-actions { display: flex; gap: 12px; margin-top: 1.2rem; }
    .convert-btn {
        flex: 1; background: linear-gradient(145deg, #0066cc, #0099ff); border: none; border-radius: 40px;
        color: white; font-weight: 700; padding: 1rem; font-size: 1.1rem; transition: 0.2s;
        box-shadow: 0 4px 10px #0066cc80; cursor: pointer; border: 1px solid #80e4ff;
    }
    .convert-btn:hover { transform: translateY(-3px); box-shadow: 0 8px 20px #00ccff; }
    .convert-btn.secondary { background: linear-gradient(145deg, #444, #222); border-color: #888; box-shadow: none; }
    .convert-note { text-align: center; margin-top: 1rem; font-size: 0.75rem; color: #ffd966; }
    .convert-close {
        position: absolute; top: 15px; right: 20px; color: #aaa; font-size: 2rem;
        cursor: pointer; transition: 0.2s; line-height: 1;
    }
    .convert-close:hover { color: #ffd966; transform: scale(1.2); }

    /* ===== 炫光全像投影 Loading 動畫 ===== */
    .hologram-loading {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.95);
        backdrop-filter: blur(10px);
        z-index: 999999;
        display: flex;
        align-items: center;
        justify-content: center;
        opacity: 0;
        visibility: hidden;
        transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    .hologram-loading.show {
        opacity: 1;
        visibility: visible;
    }

    .hologram-content {
        text-align: center;
        position: relative;
        transform: scale(0.8);
        transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    .hologram-loading.show .hologram-content {
        transform: scale(1);
    }

    .hologram-circle {
        width: 120px;
        height: 120px;
        margin: 0 auto 30px;
        position: relative;
        border-radius: 50%;
        background: linear-gradient(45deg, #00ccff, #0066cc, #00ccff);
        background-size: 200% 200%;
        animation: hologram-gradient 3s ease infinite;
        box-shadow: 
            0 0 30px rgba(0, 204, 255, 0.5),
            inset 0 0 30px rgba(0, 204, 255, 0.3);
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .hologram-inner-circle {
        width: 90px;
        height: 90px;
        border-radius: 50%;
        background: #000;
        position: relative;
        overflow: hidden;
        box-shadow: inset 0 0 20px rgba(0, 204, 255, 0.5);
    }

    .hologram-inner-circle::before {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: conic-gradient(
            from 0deg,
            transparent,
            #00ccff,
            #ffd700,
            #00ccff,
            transparent
        );
        animation: hologram-rotate 3s linear infinite;
    }

    .hologram-scan-line {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 2px;
        background: linear-gradient(90deg, 
            transparent, 
            #00ccff, 
            #ffffff, 
            #00ccff, 
            transparent
        );
        box-shadow: 0 0 20px #00ccff;
        animation: scan-move 2s ease-in-out infinite;
        opacity: 0.8;
    }

    .hologram-scan-line.delay {
        animation: scan-move 2s ease-in-out infinite 1s;
        top: auto;
        bottom: 0;
        background: linear-gradient(90deg, 
            transparent, 
            #ffd700, 
            #ffffff, 
            #ffd700, 
            transparent
        );
    }

    .hologram-glow {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 150px;
        height: 150px;
        background: radial-gradient(circle, rgba(0,204,255,0.3) 0%, transparent 70%);
        animation: pulse-glow 2s ease-in-out infinite;
    }

    .hologram-text {
        margin: 20px 0 10px;
        font-family: 'Orbitron', sans-serif;
        font-size: 24px;
        font-weight: 900;
        text-transform: uppercase;
        letter-spacing: 4px;
        color: #00ccff;
        text-shadow: 
            0 0 10px #00ccff,
            0 0 20px #0066cc,
            0 0 40px #00ccff;
        animation: text-flicker 3s linear infinite;
    }

    .glitch-text {
        position: relative;
        display: inline-block;
    }

    .glitch-text::before,
    .glitch-text::after {
        content: attr(data-text);
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: #000;
    }

    .glitch-text::before {
        animation: glitch-1 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) infinite;
        color: #ff00ff;
        z-index: -1;
    }

    .glitch-text::after {
        animation: glitch-2 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) infinite reverse;
        color: #00ffff;
        z-index: -2;
    }

    .hologram-subtext {
        font-size: 18px;
        color: #90d0ff;
        letter-spacing: 2px;
        text-transform: uppercase;
        opacity: 0.8;
        animation: fade-pulse 2s ease-in-out infinite;
        margin-top: 5px;
    }

    .hologram-particles {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
    }

    .particle {
        position: absolute;
        width: 2px;
        height: 2px;
        background: #00ccff;
        border-radius: 50%;
        box-shadow: 0 0 10px #00ccff;
        animation: particle-float 3s linear infinite;
    }

    .particle:nth-child(1) { top: 20%; left: 30%; animation-delay: 0s; }
    .particle:nth-child(2) { top: 60%; left: 70%; animation-delay: 0.5s; }
    .particle:nth-child(3) { top: 80%; left: 40%; animation-delay: 1s; }
    .particle:nth-child(4) { top: 30%; left: 80%; animation-delay: 1.5s; }
    .particle:nth-child(5) { top: 70%; left: 20%; animation-delay: 2s; }

    @keyframes hologram-gradient {
        0% { background-position: 0% 0%; }
        50% { background-position: 100% 100%; }
        100% { background-position: 0% 0%; }
    }

    @keyframes hologram-rotate {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
    }

    @keyframes scan-move {
        0% { transform: translateY(-60px); opacity: 0; }
        20% { opacity: 1; }
        80% { opacity: 1; }
        100% { transform: translateY(60px); opacity: 0; }
    }

    @keyframes pulse-glow {
        0%, 100% { opacity: 0.3; transform: translate(-50%, -50%) scale(1); }
        50% { opacity: 0.8; transform: translate(-50%, -50%) scale(1.2); }
    }

    @keyframes text-flicker {
        0%, 100% { opacity: 1; text-shadow: 0 0 10px #00ccff, 0 0 20px #0066cc, 0 0 40px #00ccff; }
        33% { opacity: 0.9; text-shadow: 0 0 15px #00ccff, 0 0 30px #0066cc, 0 0 60px #00ccff; }
        66% { opacity: 1; text-shadow: 0 0 8px #00ccff, 0 0 15px #0066cc, 0 0 30px #00ccff; }
    }

    @keyframes glitch-1 {
        0%, 100% { clip-path: inset(0 0 0 0); transform: translate(0); }
        10% { clip-path: inset(2% 0 5% 0); transform: translate(-2px, 2px); }
        20% { clip-path: inset(10% 0 20% 0); transform: translate(2px, -2px); }
        30% { clip-path: inset(50% 0 30% 0); transform: translate(-2px); }
        40% { clip-path: inset(20% 0 60% 0); transform: translate(2px); }
        50% { clip-path: inset(70% 0 10% 0); transform: translate(-2px, 2px); }
        60% { clip-path: inset(80% 0 5% 0); transform: translate(2px, -2px); }
    }

    @keyframes glitch-2 {
        0%, 100% { clip-path: inset(0 0 0 0); transform: translate(0); }
        10% { clip-path: inset(5% 0 10% 0); transform: translate(2px, -2px); }
        20% { clip-path: inset(30% 0 40% 0); transform: translate(-2px, 2px); }
        30% { clip-path: inset(60% 0 20% 0); transform: translate(2px); }
        40% { clip-path: inset(40% 0 30% 0); transform: translate(-2px); }
        50% { clip-path: inset(20% 0 50% 0); transform: translate(2px, -2px); }
        60% { clip-path: inset(10% 0 70% 0); transform: translate(-2px, 2px); }
    }

    @keyframes fade-pulse {
        0%, 100% { opacity: 0.8; }
        50% { opacity: 1; }
    }

    @keyframes particle-float {
        0% { transform: translateY(0) scale(1); opacity: 1; }
        100% { transform: translateY(-100px) scale(0); opacity: 0; }
    }
</style>
</head>
<body class="bg-gradient-to-br from-gray-900 to-blue-950 text-white">

<!-- 篩選側拉欄遮罩 -->
<div id="drawerOverlay" class="drawer-overlay"></div>

<!-- 篩選側拉欄 -->
<div id="filterDrawer" class="filter-drawer scrollbar-thin">
    <div class="flex justify-between items-center mb-6">
        <h3 class="text-primary text-lg font-bold flex items-center gap-2"><i class="fa fa-sliders text-secondary"></i> 進階篩選</h3>
        <button id="closeDrawer" class="text-gray-400 hover:text-primary text-2xl"><i class="fa fa-times-circle"></i></button>
    </div>
    <div class="mb-6">
        <div class="text-secondary text-sm mb-3 flex items-center gap-2"><i class="fa fa-percent"></i> 代幣 <span class="text-[0.6rem] bg-blue-900 px-1.5 py-0.5 rounded-full">1枚=X</span></div>
        <div class="flex flex-wrap gap-2">
            <span class="filter-chip" data-type="ratio" data-value="2.1">2.1</span>
            <span class="filter-chip" data-type="ratio" data-value="0.5">0.5</span>
            <span class="filter-chip" data-type="ratio" data-value="0.33">0.33</span>
            <span class="filter-chip" data-type="ratio" data-value="0.25">0.25</span>
            <span class="filter-chip" data-type="ratio" data-value="0.2">0.2</span>
            <span class="filter-chip" data-type="ratio" data-value="0.17">0.17</span>
            <span class="filter-chip" data-type="ratio" data-value="0.1">0.1</span>
        </div>
    </div>
    <div class="mb-6">
        <div class="text-secondary text-sm mb-3 flex items-center gap-2"><i class="fa fa-cube"></i> 機種</div>
        <div class="flex flex-wrap gap-2">
            <span class="filter-chip" data-type="model">4號機</span>
            <span class="filter-chip" data-type="model">5號機</span>
            <span class="filter-chip" data-type="model">6號機</span>
        </div>
    </div>
    <div class="mb-8">
        <div class="text-secondary text-sm mb-3 flex items-center gap-2"><i class="fa fa-building"></i> 機台廠商</div>
        <div class="grid grid-cols-2 gap-2">
            <span class="filter-chip text-center" data-type="vendor">ELECO</span>
            <span class="filter-chip text-center" data-type="vendor">ENTER RISE</span>
            <span class="filter-chip text-center" data-type="vendor">Olympia</span>
            <span class="filter-chip text-center" data-type="vendor">北電子</span>
            <span class="filter-chip text-center" data-type="vendor">Sammy</span>
            <span class="filter-chip text-center" data-type="vendor">Daito</span>
            <span class="filter-chip text-center" data-type="vendor">Rodeo</span>
            <span class="filter-chip text-center" data-type="vendor">bellco</span>
            <span class="filter-chip text-center" data-type="vendor">Universal</span>
            <span class="filter-chip text-center" data-type="vendor">Bros</span>
            <span class="filter-chip text-center" data-type="vendor">YAMASA</span>
            <span class="filter-chip text-center" data-type="vendor">Mizuho</span>
        </div>
    </div>
    <div class="flex gap-3 mt-4">
        <button id="resetFilters" class="flex-1 py-3 border border-primary rounded-xl text-primary hover:bg-primary/20 transition hover:scale-105 active:scale-95 focus-visible:outline-3 focus-visible:outline-blue-400">重置篩選</button>
        <button id="applyFilters" class="flex-1 py-3 bg-primary rounded-xl text-white font-bold hover:bg-blue-600 transition hover:scale-105 active:scale-95 focus-visible:outline-3 focus-visible:outline-blue-400">套用</button>
    </div>
    <div class="mt-3">
        <button id="clearAllFilters" class="w-full py-2 text-sm text-gray-400 border border-gray-700 rounded-xl hover:text-primary hover:border-primary transition hover:scale-105 active:scale-95">
            <i class="fa fa-times-circle mr-1"></i> 清除全部條件
        </button>
    </div>
</div>

<!-- 主內容 -->
<div class="max-w-md mx-auto tech-gradient min-h-screen flex flex-col relative">
    <header class="px-4 py-3 bg-dark-200/90 tech-border">
        <div class="flex items-center justify-between">
            <a href="index.html" class="logo" id="logoHomeBtn">
                <div class="logo-icon"><div class="logo-icon-inner">TP</div></div>
                <div class="logo-text"><div class="logo-main">T-PACHIN</div><div class="logo-sub">CYBER PACHINKO SYSTEM</div></div>
            </a>
            <div class="text-right flex flex-col items-end">
                <a href="about.html" class="text-xs text-white clickable hover-glow" id="nicknameBtn">夫人會生氣</a>
                <span class="font-bold text-lg text-amber-400 clickable hover-glow" id="tokenBtn" title="點擊轉換點數為代幣">5280</span>
            </div>
        </div>
    </header>

    <!-- Banner 輪播區 -->
    <div class="px-4 mt-3">
        <div class="banner-area" id="bannerArea">
            <div class="banner-slider" id="bannerSlider">
                <div class="banner-slide"><img src="https://static.wixstatic.com/media/d5e540_e351cf64c0eb4ea18ed0bf5aa982a3f4~mv2.jpg" alt="促銷1"></div>
                <div class="banner-slide"><img src="https://static.wixstatic.com/media/d5e540_e7da9c3f1fb24a2aa9ef8d180a2cf6fa~mv2.png" alt="促銷2"></div>
                <div class="banner-slide"><img src="https://static.wixstatic.com/media/d5e540_0926089e3da443eebe6bc2ede58f5788~mv2.png" alt="促銷3"></div>
            </div>
            <div class="banner-touch-area" id="bannerTouchArea"></div>
            <div class="banner-dots" id="bannerDots"><span class="banner-dot active" data-slide="0"></span><span class="banner-dot" data-slide="1"></span><span class="banner-dot" data-slide="2"></span></div>
        </div>
    </div>

    <!-- 公告按鈕框 -->
    <div class="px-4 mt-2">
        <div class="announcement-combo">
            <div class="hologram-lines">
                <div class="animate-scan-line" style="top: 20%;"></div>
                <div class="animate-scan-line-delay" style="top: 60%;"></div>
            </div>
            <a href="news.html" class="combo-announce-btn">
                <i class="fa fa-bullhorn"></i>
                <span>公告</span>
            </a>
            <div class="combo-marquee">
                <marquee scrollamount="5" behavior="scroll" direction="left">◈ 春 季 人 氣 機 台 大 賞 ◈ 甲 賀 忍 法 帖 系 列 全 線 熱 賣 ◈ 代 幣 優 惠 實 施 中 ◈</marquee>
            </div>
        </div>
    </div>

    <!-- 主要分類標籤 + 篩選按鈕 -->
    <div class="px-4 py-3 flex items-center justify-between">
        <div class="flex-1 mr-2 relative tab-container" id="tabContainer">
            <div class="tabs-wrapper" id="tabsWrapper" style="touch-action: pan-x pan-y; -webkit-overflow-scrolling: touch;">
                <button class="tab-btn tech-tab-active px-5 py-2 rounded-full text-sm font-medium" data-tab="全部">全部</button>
                <button class="tab-btn bg-dark-200 tech-border px-5 py-2 rounded-full text-sm font-medium" data-tab="新機">新機</button>
                <button class="tab-btn bg-dark-200 tech-border px-5 py-2 rounded-full text-sm font-medium" data-tab="人氣機台">人氣機台</button>
                <button class="tab-btn bg-dark-200 tech-border px-5 py-2 rounded-full text-sm font-medium" data-tab="4號機">4號機</button>
                <button class="tab-btn bg-dark-200 tech-border px-5 py-2 rounded-full text-sm font-medium" data-tab="5號機">5號機</button>
                <button class="tab-btn bg-dark-200 tech-border px-5 py-2 rounded-full text-sm font-medium" data-tab="6號機">6號機</button>
            </div>
            <div class="tab-indicator" id="tabIndicator"></div>
        </div>
        <div class="flex items-center gap-2 flex-shrink-0">
            <button id="openDrawerBtn" class="bg-gradient-to-r from-blue-700 to-blue-500 border border-primary px-4 py-2 rounded-full text-sm font-medium flex items-center gap-1 shadow-lg"><i class="fa fa-sliders"></i> 篩選</button>
        </div>
    </div>

    <!-- 機台列表 -->
    <main class="flex-1 px-4 pb-24 overflow-y-auto scrollbar-thin main-content" id="machineList">
        
        <!-- 新機入替區塊 -->
        <div class="category-section" data-category="新機">
            <h2 class="category-title"><i class="fa fa-star text-secondary"></i> 新機入替 <span class="text-xs text-gray-400 ml-2">共6款</span></h2>
            
            <!-- 滑動模式 - 用於「全部」標籤 -->
            <div class="slider-container new-slider-mode">
                <div class="slider-arrow left" id="newPrev"><i class="fa fa-chevron-left"></i></div>
                <div class="slider-arrow right" id="newNext"><i class="fa fa-chevron-right"></i></div>
                
                <div class="slider-wrapper" id="newWrapper">
                    <!-- 甲賀忍法帖 弐 -->
                    <div class="slider-item">
                        <div class="game-card-bg" data-categories='["新機","人氣機台","6號機"]'>
                            <div class="new-machine-badge"><img src="https://4boom.jp/blog/wp-content/uploads/2019/08/shin_aut-3_y-240x89.png" alt="新機入替" class="w-20 h-auto"></div>
                            <span class="popular-badge">HOT 2</span>
                            <img src="https://static.wixstatic.com/media/d5e540_e7da9c3f1fb24a2aa9ef8d180a2cf6fa~mv2.png" class="w-full h-28 object-cover">
                            <div class="p-2">
                                <h3 class="text-primary text-sm truncate">甲賀忍法帖 弐</h3>
                                <div class="flex items-center gap-1 mt-1"><span class="bg-blue-900/50 px-1.5 py-0.5 rounded text-xs">Sammy</span></div>
                                <div class="flex gap-1 mt-2"><button class="enter-btn" data-action="enter" data-machine="甲賀忍法帖 弐">進入</button></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 超級奇蹟小丑 -->
                    <div class="slider-item">
                        <div class="game-card-bg" data-categories='["新機","人氣機台"]'>
                            <div class="new-machine-badge"><img src="https://4boom.jp/blog/wp-content/uploads/2019/08/shin_aut-3_y-240x89.png" alt="新機入替" class="w-20 h-auto"></div>
                            <span class="popular-badge">HOT 5</span>
                            <img src="https://static.wixstatic.com/media/d5e540_1c6cd7d36cc24e47a6b359a1abeb3923~mv2.png" class="w-full h-28 object-cover">
                            <div class="p-2">
                                <h3 class="text-primary text-sm truncate">超級奇蹟小丑</h3>
                                <div class="flex items-center gap-1 mt-1"><span class="bg-blue-900/50 px-1.5 py-0.5 rounded text-xs">Olympia</span></div>
                                <div class="flex gap-1 mt-2"><button class="enter-btn" data-action="enter" data-machine="超級奇蹟小丑">進入</button></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 押忍！番長4 -->
                    <div class="slider-item">
                        <div class="game-card-bg" data-categories='["新機","人氣機台"]'>
                            <div class="new-machine-badge"><img src="https://4boom.jp/blog/wp-content/uploads/2019/08/shin_aut-3_y-240x89.png" alt="新機入替" class="w-20 h-auto"></div>
                            <span class="popular-badge">HOT 1</span>
                            <img src="https://static.wixstatic.com/media/d5e540_0926089e3da443eebe6bc2ede58f5788~mv2.png" class="w-full h-28 object-cover">
                            <div class="p-2">
                                <h3 class="text-primary text-sm truncate">押忍！番長4</h3>
                                <div class="flex items-center gap-1 mt-1"><span class="bg-blue-900/50 px-1.5 py-0.5 rounded text-xs">Daito</span></div>
                                <div class="flex gap-1 mt-2"><button class="enter-btn" data-action="enter" data-machine="押忍！番長4">進入</button></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 革命機ヴァルヴレイヴ -->
                    <div class="slider-item">
                        <div class="game-card-bg" data-categories='["新機","6號機"]'>
                            <div class="new-machine-badge"><img src="https://4boom.jp/blog/wp-content/uploads/2019/08/shin_aut-3_y-240x89.png" alt="新機入替" class="w-20 h-auto"></div>
                            <img src="https://static.wixstatic.com/media/d5e540_e7da9c3f1fb24a2aa9ef8d180a2cf6fa~mv2.png" class="w-full h-28 object-cover">
                            <div class="p-2">
                                <h3 class="text-primary text-sm truncate">革命機ヴァルヴレイヴ</h3>
                                <div class="flex items-center gap-1 mt-1"><span class="bg-blue-900/50 px-1.5 py-0.5 rounded text-xs">Sammy</span></div>
                                <div class="flex gap-1 mt-2"><button class="enter-btn" data-action="enter" data-machine="革命機ヴァルヴレイヴ">進入</button></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- パチスロ 幼女戦記 -->
                    <div class="slider-item">
                        <div class="game-card-bg" data-categories='["新機","6號機"]'>
                            <div class="new-machine-badge"><img src="https://4boom.jp/blog/wp-content/uploads/2019/08/shin_aut-3_y-240x89.png" alt="新機入替" class="w-20 h-auto"></div>
                            <img src="https://static.wixstatic.com/media/d5e540_1c6cd7d36cc24e47a6b359a1abeb3923~mv2.png" class="w-full h-28 object-cover">
                            <div class="p-2">
                                <h3 class="text-primary text-sm truncate">パチスロ 幼女戦記</h3>
                                <div class="flex items-center gap-1 mt-1"><span class="bg-blue-900/50 px-1.5 py-0.5 rounded text-xs">Rodeo</span></div>
                                <div class="flex gap-1 mt-2"><button class="enter-btn" data-action="enter" data-machine="パチスロ 幼女戦記">進入</button></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- L 犬夜叉 -->
                    <div class="slider-item">
                        <div class="game-card-bg" data-categories='["新機","6號機"]'>
                            <div class="new-machine-badge"><img src="https://4boom.jp/blog/wp-content/uploads/2019/08/shin_aut-3_y-240x89.png" alt="新機入替" class="w-20 h-auto"></div>
                            <img src="https://static.wixstatic.com/media/d5e540_0926089e3da443eebe6bc2ede58f5788~mv2.png" class="w-full h-28 object-cover">
                            <div class="p-2">
                                <h3 class="text-primary text-sm truncate">L 犬夜叉</h3>
                                <div class="flex items-center gap-1 mt-1"><span class="bg-blue-900/50 px-1.5 py-0.5 rounded text-xs">Olympia</span></div>
                                <div class="flex gap-1 mt-2"><button class="enter-btn" data-action="enter" data-machine="L 犬夜叉">進入</button></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="slider-indicator" id="newDots">
                    <span class="slider-dot active" data-index="0"></span>
                    <span class="slider-dot" data-index="1"></span>
                    <span class="slider-dot" data-index="2"></span>
                </div>
            </div>
            
            <!-- 垂直模式 - 用於「新機」標籤 -->
            <div class="vertical-grid new-vertical-mode" style="display: none;">
                <!-- 甲賀忍法帖 弐 -->
                <div class="game-card-bg" data-categories='["新機","人氣機台","6號機"]'>
                    <div class="new-machine-badge"><img src="https://4boom.jp/blog/wp-content/uploads/2019/08/shin_aut-3_y-240x89.png" alt="新機入替" class="w-20 h-auto"></div>
                    <span class="popular-badge">HOT 2</span>
                    <img src="https://static.wixstatic.com/media/d5e540_e7da9c3f1fb24a2aa9ef8d180a2cf6fa~mv2.png" class="w-full h-28 object-cover">
                    <div class="p-2">
                        <h3 class="text-primary text-sm truncate">甲賀忍法帖 弐</h3>
                        <div class="flex items-center gap-1 mt-1"><span class="bg-blue-900/50 px-1.5 py-0.5 rounded text-xs">Sammy</span></div>
                        <div class="flex gap-1 mt-2"><button class="enter-btn" data-action="enter" data-machine="甲賀忍法帖 弐">進入</button></div>
                    </div>
                </div>
                
                <!-- 超級奇蹟小丑 -->
                <div class="game-card-bg" data-categories='["新機","人氣機台"]'>
                    <div class="new-machine-badge"><img src="https://4boom.jp/blog/wp-content/uploads/2019/08/shin_aut-3_y-240x89.png" alt="新機入替" class="w-20 h-auto"></div>
                    <span class="popular-badge">HOT 5</span>
                    <img src="https://static.wixstatic.com/media/d5e540_1c6cd7d36cc24e47a6b359a1abeb3923~mv2.png" class="w-full h-28 object-cover">
                    <div class="p-2">
                        <h3 class="text-primary text-sm truncate">超級奇蹟小丑</h3>
                        <div class="flex items-center gap-1 mt-1"><span class="bg-blue-900/50 px-1.5 py-0.5 rounded text-xs">Olympia</span></div>
                        <div class="flex gap-1 mt-2"><button class="enter-btn" data-action="enter" data-machine="超級奇蹟小丑">進入</button></div>
                    </div>
                </div>
                
                <!-- 押忍！番長4 -->
                <div class="game-card-bg" data-categories='["新機","人氣機台"]'>
                    <div class="new-machine-badge"><img src="https://4boom.jp/blog/wp-content/uploads/2019/08/shin_aut-3_y-240x89.png" alt="新機入替" class="w-20 h-auto"></div>
                    <span class="popular-badge">HOT 1</span>
                    <img src="https://static.wixstatic.com/media/d5e540_0926089e3da443eebe6bc2ede58f5788~mv2.png" class="w-full h-28 object-cover">
                    <div class="p-2">
                        <h3 class="text-primary text-sm truncate">押忍！番長4</h3>
                        <div class="flex items-center gap-1 mt-1"><span class="bg-blue-900/50 px-1.5 py-0.5 rounded text-xs">Daito</span></div>
                        <div class="flex gap-1 mt-2"><button class="enter-btn" data-action="enter" data-machine="押忍！番長4">進入</button></div>
                    </div>
                </div>
                
                <!-- 革命機ヴァルヴレイヴ -->
                <div class="game-card-bg" data-categories='["新機","6號機"]'>
                    <div class="new-machine-badge"><img src="https://4boom.jp/blog/wp-content/uploads/2019/08/shin_aut-3_y-240x89.png" alt="新機入替" class="w-20 h-auto"></div>
                    <img src="https://static.wixstatic.com/media/d5e540_e7da9c3f1fb24a2aa9ef8d180a2cf6fa~mv2.png" class="w-full h-28 object-cover">
                    <div class="p-2">
                        <h3 class="text-primary text-sm truncate">革命機ヴァルヴレイヴ</h3>
                        <div class="flex items-center gap-1 mt-1"><span class="bg-blue-900/50 px-1.5 py-0.5 rounded text-xs">Sammy</span></div>
                        <div class="flex gap-1 mt-2"><button class="enter-btn" data-action="enter" data-machine="革命機ヴァルヴレイヴ">進入</button></div>
                    </div>
                </div>
                
                <!-- パチスロ 幼女戦記 -->
                <div class="game-card-bg" data-categories='["新機","6號機"]'>
                    <div class="new-machine-badge"><img src="https://4boom.jp/blog/wp-content/uploads/2019/08/shin_aut-3_y-240x89.png" alt="新機入替" class="w-20 h-auto"></div>
                    <img src="https://static.wixstatic.com/media/d5e540_1c6cd7d36cc24e47a6b359a1abeb3923~mv2.png" class="w-full h-28 object-cover">
                    <div class="p-2">
                        <h3 class="text-primary text-sm truncate">パチスロ 幼女戦記</h3>
                        <div class="flex items-center gap-1 mt-1"><span class="bg-blue-900/50 px-1.5 py-0.5 rounded text-xs">Rodeo</span></div>
                        <div class="flex gap-1 mt-2"><button class="enter-btn" data-action="enter" data-machine="パチスロ 幼女戦記">進入</button></div>
                    </div>
                </div>
                
                <!-- L 犬夜叉 -->
                <div class="game-card-bg" data-categories='["新機","6號機"]'>
                    <div class="new-machine-badge"><img src="https://4boom.jp/blog/wp-content/uploads/2019/08/shin_aut-3_y-240x89.png" alt="新機入替" class="w-20 h-auto"></div>
                    <img src="https://static.wixstatic.com/media/d5e540_0926089e3da443eebe6bc2ede58f5788~mv2.png" class="w-full h-28 object-cover">
                    <div class="p-2">
                        <h3 class="text-primary text-sm truncate">L 犬夜叉</h3>
                        <div class="flex items-center gap-1 mt-1"><span class="bg-blue-900/50 px-1.5 py-0.5 rounded text-xs">Olympia</span></div>
                        <div class="flex gap-1 mt-2"><button class="enter-btn" data-action="enter" data-machine="L 犬夜叉">進入</button></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 人氣機台區塊 -->
        <div class="category-section" data-category="人氣機台">
            <h2 class="category-title"><i class="fa fa-fire text-secondary"></i> 人氣機台 <span class="text-xs text-gray-400 ml-2">🔥 本週熱門</span></h2>
            <div class="vertical-grid">
                <!-- 吉宗 -->
                <div class="game-card-bg" data-categories='["人氣機台","4號機"]'>
                    <span class="popular-badge">HOT 3</span>
                    <img src="https://static.wixstatic.com/media/d5e540_0926089e3da443eebe6bc2ede58f5788~mv2.png" class="w-full h-28 object-cover">
                    <div class="p-2">
                        <h3 class="text-primary text-sm truncate">吉宗</h3>
                        <div class="flex items-center gap-1 mt-1"><span class="bg-blue-900/50 px-1.5 py-0.5 rounded text-xs">Daito</span></div>
                        <div class="flex gap-1 mt-2"><button class="enter-btn" data-action="enter" data-machine="吉宗">進入</button></div>
                    </div>
                </div>
                <!-- パチスロ モンキーターン -->
                <div class="game-card-bg" data-categories='["人氣機台","5號機"]'>
                    <span class="popular-badge">HOT 4</span>
                    <img src="https://static.wixstatic.com/media/d5e540_1c6cd7d36cc24e47a6b359a1abeb3923~mv2.png" class="w-full h-28 object-cover">
                    <div class="p-2">
                        <h3 class="text-primary text-sm truncate">パチスロ モンキーターン</h3>
                        <div class="flex items-center gap-1 mt-1"><span class="bg-blue-900/50 px-1.5 py-0.5 rounded text-xs">Rodeo</span></div>
                        <div class="flex gap-1 mt-2"><button class="enter-btn" data-action="enter" data-machine="パチスロ モンキーターン">進入</button></div>
                    </div>
                </div>
                <!-- 押忍！番長3 -->
                <div class="game-card-bg" data-categories='["人氣機台","5號機"]'>
                    <span class="popular-badge">HOT 6</span>
                    <img src="https://static.wixstatic.com/media/d5e540_0926089e3da443eebe6bc2ede58f5788~mv2.png" class="w-full h-28 object-cover">
                    <div class="p-2">
                        <h3 class="text-primary text-sm truncate">押忍！番長3</h3>
                        <div class="flex items-center gap-1 mt-1"><span class="bg-blue-900/50 px-1.5 py-0.5 rounded text-xs">Daito</span></div>
                        <div class="flex gap-1 mt-2"><button class="enter-btn" data-action="enter" data-machine="押忍！番長3">進入</button></div>
                    </div>
                </div>
                <!-- パチスロ ガールズ＆パンツァー -->
                <div class="game-card-bg" data-categories='["人氣機台","5號機"]'>
                    <span class="popular-badge">HOT 7</span>
                    <img src="https://static.wixstatic.com/media/d5e540_e7da9c3f1fb24a2aa9ef8d180a2cf6fa~mv2.png" class="w-full h-28 object-cover">
                    <div class="p-2">
                        <h3 class="text-primary text-sm truncate">パチスロ ガールズ＆パンツァー</h3>
                        <div class="flex items-center gap-1 mt-1"><span class="bg-blue-900/50 px-1.5 py-0.5 rounded text-xs">Sammy</span></div>
                        <div class="flex gap-1 mt-2"><button class="enter-btn" data-action="enter" data-machine="パチスロ ガールズ＆パンツァー">進入</button></div>
                    </div>
                </div>
                <!-- パチスロ 北斗の拳 -->
                <div class="game-card-bg" data-categories='["人氣機台","6號機"]'>
                    <span class="popular-badge">HOT 8</span>
                    <img src="https://static.wixstatic.com/media/d5e540_1c6cd7d36cc24e47a6b359a1abeb3923~mv2.png" class="w-full h-28 object-cover">
                    <div class="p-2">
                        <h3 class="text-primary text-sm truncate">パチスロ 北斗の拳</h3>
                        <div class="flex items-center gap-1 mt-1"><span class="bg-blue-900/50 px-1.5 py-0.5 rounded text-xs">Sammy</span></div>
                        <div class="flex gap-1 mt-2"><button class="enter-btn" data-action="enter" data-machine="パチスロ 北斗の拳">進入</button></div>
                    </div>
                </div>
                <!-- パチスロ 新鬼武者 -->
                <div class="game-card-bg" data-categories='["人氣機台","5號機"]'>
                    <span class="popular-badge">HOT 9</span>
                    <img src="https://static.wixstatic.com/media/d5e540_0926089e3da443eebe6bc2ede58f5788~mv2.png" class="w-full h-28 object-cover">
                    <div class="p-2">
                        <h3 class="text-primary text-sm truncate">パチスロ 新鬼武者</h3>
                        <div class="flex items-center gap-1 mt-1"><span class="bg-blue-900/50 px-1.5 py-0.5 rounded text-xs">Daito</span></div>
                        <div class="flex gap-1 mt-2"><button class="enter-btn" data-action="enter" data-machine="パチスロ 新鬼武者">進入</button></div>
                    </div>
                </div>
                <!-- パチスロ 魔法少女まどか☆マギカ -->
                <div class="game-card-bg" data-categories='["人氣機台","6號機"]'>
                    <span class="popular-badge">HOT 10</span>
                    <img src="https://static.wixstatic.com/media/d5e540_e7da9c3f1fb24a2aa9ef8d180a2cf6fa~mv2.png" class="w-full h-28 object-cover">
                    <div class="p-2">
                        <h3 class="text-primary text-sm truncate">パチスロ 魔法少女まどか☆マギカ</h3>
                        <div class="flex items-center gap-1 mt-1"><span class="bg-blue-900/50 px-1.5 py-0.5 rounded text-xs">Rodeo</span></div>
                        <div class="flex gap-1 mt-2"><button class="enter-btn" data-action="enter" data-machine="パチスロ 魔法少女まどか☆マギカ">進入</button></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 4號機區塊 -->
        <div class="category-section" data-category="4號機">
            <h2 class="category-title"><i class="fa fa-cube"></i> 4號機 <span class="text-xs text-gray-400 ml-2">經典不敗</span></h2>
            <div class="vertical-grid">
                <div class="game-card-bg" data-categories='["4號機"]'>
                    <img src="https://static.wixstatic.com/media/d5e540_0926089e3da443eebe6bc2ede58f5788~mv2.png" class="w-full h-28 object-cover">
                    <div class="p-2">
                        <h3 class="text-primary text-sm truncate">花月</h3>
                        <div class="flex items-center gap-1 mt-1"><span class="bg-blue-900/50 px-1.5 py-0.5 rounded text-xs">Olympia</span></div>
                        <div class="flex gap-1 mt-2"><button class="enter-btn" data-action="enter" data-machine="花月">進入</button></div>
                    </div>
                </div>
                <div class="game-card-bg" data-categories='["4號機"]'>
                    <img src="https://static.wixstatic.com/media/d5e540_e7da9c3f1fb24a2aa9ef8d180a2cf6fa~mv2.png" class="w-full h-28 object-cover">
                    <div class="p-2">
                        <h3 class="text-primary text-sm truncate">大花火</h3>
                        <div class="flex items-center gap-1 mt-1"><span class="bg-blue-900/50 px-1.5 py-0.5 rounded text-xs">Olympia</span></div>
                        <div class="flex gap-1 mt-2"><button class="enter-btn" data-action="enter" data-machine="大花火">進入</button></div>
                    </div>
                </div>
                <div class="game-card-bg" data-categories='["4號機"]'>
                    <img src="https://static.wixstatic.com/media/d5e540_1c6cd7d36cc24e47a6b359a1abeb3923~mv2.png" class="w-full h-28 object-cover">
                    <div class="p-2">
                        <h3 class="text-primary text-sm truncate">ドンちゃん2</h3>
                        <div class="flex items-center gap-1 mt-1"><span class="bg-blue-900/50 px-1.5 py-0.5 rounded text-xs">Rodeo</span></div>
                        <div class="flex gap-1 mt-2"><button class="enter-btn" data-action="enter" data-machine="ドンちゃん2">進入</button></div>
                    </div>
                </div>
                <div class="game-card-bg" data-categories='["4號機"]'>
                    <img src="https://static.wixstatic.com/media/d5e540_0926089e3da443eebe6bc2ede58f5788~mv2.png" class="w-full h-28 object-cover">
                    <div class="p-2">
                        <h3 class="text-primary text-sm truncate">アラジンA</h3>
                        <div class="flex items-center gap-1 mt-1"><span class="bg-blue-900/50 px-1.5 py-0.5 rounded text-xs">Sammy</span></div>
                        <div class="flex gap-1 mt-2"><button class="enter-btn" data-action="enter" data-machine="アラジンA">進入</button></div>
                    </div>
                </div>
                <div class="game-card-bg" data-categories='["4號機"]'>
                    <img src="https://static.wixstatic.com/media/d5e540_e7da9c3f1fb24a2aa9ef8d180a2cf6fa~mv2.png" class="w-full h-28 object-cover">
                    <div class="p-2">
                        <h3 class="text-primary text-sm truncate">クランキーコンドル</h3>
                        <div class="flex items-center gap-1 mt-1"><span class="bg-blue-900/50 px-1.5 py-0.5 rounded text-xs">Sammy</span></div>
                        <div class="flex gap-1 mt-2"><button class="enter-btn" data-action="enter" data-machine="クランキーコンドル">進入</button></div>
                    </div>
                </div>
                <div class="game-card-bg" data-categories='["4號機"]'>
                    <img src="https://static.wixstatic.com/media/d5e540_1c6cd7d36cc24e47a6b359a1abeb3923~mv2.png" class="w-full h-28 object-cover">
                    <div class="p-2">
                        <h3 class="text-primary text-sm truncate">バーサス</h3>
                        <div class="flex items-center gap-1 mt-1"><span class="bg-blue-900/50 px-1.5 py-0.5 rounded text-xs">Daito</span></div>
                        <div class="flex gap-1 mt-2"><button class="enter-btn" data-action="enter" data-machine="バーサス">進入</button></div>
                    </div>
                </div>
                <div class="game-card-bg" data-categories='["4號機"]'>
                    <img src="https://static.wixstatic.com/media/d5e540_0926089e3da443eebe6bc2ede58f5788~mv2.png" class="w-full h-28 object-cover">
                    <div class="p-2">
                        <h3 class="text-primary text-sm truncate">ニューパルサー</h3>
                        <div class="flex items-center gap-1 mt-1"><span class="bg-blue-900/50 px-1.5 py-0.5 rounded text-xs">Olympia</span></div>
                        <div class="flex gap-1 mt-2"><button class="enter-btn" data-action="enter" data-machine="ニューパルサー">進入</button></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 5號機區塊 -->
        <div class="category-section" data-category="5號機">
            <h2 class="category-title"><i class="fa fa-cube"></i> 5號機 <span class="text-xs text-gray-400 ml-2">主流機種</span></h2>
            <div class="vertical-grid">
                <div class="game-card-bg" data-categories='["5號機"]'>
                    <img src="https://static.wixstatic.com/media/d5e540_1c6cd7d36cc24e47a6b359a1abeb3923~mv2.png" class="w-full h-28 object-cover">
                    <div class="p-2">
                        <h3 class="text-primary text-sm truncate">奇蹟小丑</h3>
                        <div class="flex items-center gap-1 mt-1"><span class="bg-blue-900/50 px-1.5 py-0.5 rounded text-xs">Rodeo</span></div>
                        <div class="flex gap-1 mt-2"><button class="enter-btn" data-action="enter" data-machine="奇蹟小丑">進入</button></div>
                    </div>
                </div>
                <div class="game-card-bg" data-categories='["5號機"]'>
                    <img src="https://static.wixstatic.com/media/d5e540_1c6cd7d36cc24e47a6b359a1abeb3923~mv2.png" class="w-full h-28 object-cover">
                    <div class="p-2">
                        <h3 class="text-primary text-sm truncate">超級奇蹟</h3>
                        <div class="flex items-center gap-1 mt-1"><span class="bg-blue-900/50 px-1.5 py-0.5 rounded text-xs">Olympia</span></div>
                        <div class="flex gap-1 mt-2"><button class="enter-btn" data-action="enter" data-machine="超級奇蹟">進入</button></div>
                    </div>
                </div>
                <div class="game-card-bg" data-categories='["5號機"]'>
                    <img src="https://static.wixstatic.com/media/d5e540_e7da9c3f1fb24a2aa9ef8d180a2cf6fa~mv2.png" class="w-full h-28 object-cover">
                    <div class="p-2">
                        <h3 class="text-primary text-sm truncate">バジリスク〜甲賀忍法帖〜</h3>
                        <div class="flex items-center gap-1 mt-1"><span class="bg-blue-900/50 px-1.5 py-0.5 rounded text-xs">Sammy</span></div>
                        <div class="flex gap-1 mt-2"><button class="enter-btn" data-action="enter" data-machine="バジリスク〜甲賀忍法帖〜">進入</button></div>
                    </div>
                </div>
                <div class="game-card-bg" data-categories='["5號機"]'>
                    <img src="https://static.wixstatic.com/media/d5e540_e7da9c3f1fb24a2aa9ef8d180a2cf6fa~mv2.png" class="w-full h-28 object-cover">
                    <div class="p-2">
                        <h3 class="text-primary text-sm truncate">パチスロ エウレカセブン</h3>
                        <div class="flex items-center gap-1 mt-1"><span class="bg-blue-900/50 px-1.5 py-0.5 rounded text-xs">Rodeo</span></div>
                        <div class="flex gap-1 mt-2"><button class="enter-btn" data-action="enter" data-machine="パチスロ エウレカセブン">進入</button></div>
                    </div>
                </div>
                <div class="game-card-bg" data-categories='["5號機"]'>
                    <img src="https://static.wixstatic.com/media/d5e540_1c6cd7d36cc24e47a6b359a1abeb3923~mv2.png" class="w-full h-28 object-cover">
                    <div class="p-2">
                        <h3 class="text-primary text-sm truncate">パチスロ コードギアス</h3>
                        <div class="flex items-center gap-1 mt-1"><span class="bg-blue-900/50 px-1.5 py-0.5 rounded text-xs">Sammy</span></div>
                        <div class="flex gap-1 mt-2"><button class="enter-btn" data-action="enter" data-machine="パチスロ コードギアス">進入</button></div>
                    </div>
                </div>
                <div class="game-card-bg" data-categories='["5號機"]'>
                    <img src="https://static.wixstatic.com/media/d5e540_0926089e3da443eebe6bc2ede58f5788~mv2.png" class="w-full h-28 object-cover">
                    <div class="p-2">
                        <h3 class="text-primary text-sm truncate">パチスロ 戦国無双</h3>
                        <div class="flex items-center gap-1 mt-1"><span class="bg-blue-900/50 px-1.5 py-0.5 rounded text-xs">Daito</span></div>
                        <div class="flex gap-1 mt-2"><button class="enter-btn" data-action="enter" data-machine="パチスロ 戦国無双">進入</button></div>
                    </div>
                </div>
                <div class="game-card-bg" data-categories='["5號機"]'>
                    <img src="https://static.wixstatic.com/media/d5e540_e7da9c3f1fb24a2aa9ef8d180a2cf6fa~mv2.png" class="w-full h-28 object-cover">
                    <div class="p-2">
                        <h3 class="text-primary text-sm truncate">パチスロ 蒼天の拳</h3>
                        <div class="flex items-center gap-1 mt-1"><span class="bg-blue-900/50 px-1.5 py-0.5 rounded text-xs">Olympia</span></div>
                        <div class="flex gap-1 mt-2"><button class="enter-btn" data-action="enter" data-machine="パチスロ 蒼天の拳">進入</button></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 6號機區塊 -->
        <div class="category-section" data-category="6號機">
            <h2 class="category-title"><i class="fa fa-cube"></i> 6號機 <span class="text-xs text-gray-400 ml-2">最新銳</span></h2>
            <div class="vertical-grid">
                <div class="game-card-bg" data-categories='["6號機"]'>
                    <img src="https://static.wixstatic.com/media/d5e540_e7da9c3f1fb24a2aa9ef8d180a2cf6fa~mv2.png" class="w-full h-28 object-cover">
                    <div class="p-2">
                        <h3 class="text-primary text-sm truncate">新甲賀</h3>
                        <div class="flex items-center gap-1 mt-1"><span class="bg-blue-900/50 px-1.5 py-0.5 rounded text-xs">Sammy</span></div>
                        <div class="flex gap-1 mt-2"><button class="enter-btn" data-action="enter" data-machine="新甲賀">進入</button></div>
                    </div>
                </div>
                <div class="game-card-bg" data-categories='["6號機"]'>
                    <img src="https://static.wixstatic.com/media/d5e540_1c6cd7d36cc24e47a6b359a1abeb3923~mv2.png" class="w-full h-28 object-cover">
                    <div class="p-2">
                        <h3 class="text-primary text-sm truncate">パチスロ ゴッドイーター</h3>
                        <div class="flex items-center gap-1 mt-1"><span class="bg-blue-900/50 px-1.5 py-0.5 rounded text-xs">Rodeo</span></div>
                        <div class="flex gap-1 mt-2"><button class="enter-btn" data-action="enter" data-machine="パチスロ ゴッドイーター">進入</button></div>
                    </div>
                </div>
                <div class="game-card-bg" data-categories='["6號機"]'>
                    <img src="https://static.wixstatic.com/media/d5e540_0926089e3da443eebe6bc2ede58f5788~mv2.png" class="w-full h-28 object-cover">
                    <div class="p-2">
                        <h3 class="text-primary text-sm truncate">パチスロ ダンまち</h3>
                        <div class="flex items-center gap-1 mt-1"><span class="bg-blue-900/50 px-1.5 py-0.5 rounded text-xs">Daito</span></div>
                        <div class="flex gap-1 mt-2"><button class="enter-btn" data-action="enter" data-machine="パチスロ ダンまち">進入</button></div>
                    </div>
                </div>
                <div class="game-card-bg" data-categories='["6號機"]'>
                    <img src="https://static.wixstatic.com/media/d5e540_e7da9c3f1fb24a2aa9ef8d180a2cf6fa~mv2.png" class="w-full h-28 object-cover">
                    <div class="p-2">
                        <h3 class="text-primary text-sm truncate">L 聖戦士ダンバイン</h3>
                        <div class="flex items-center gap-1 mt-1"><span class="bg-blue-900/50 px-1.5 py-0.5 rounded text-xs">Sammy</span></div>
                        <div class="flex gap-1 mt-2"><button class="enter-btn" data-action="enter" data-machine="L 聖戦士ダンバイン">進入</button></div>
                    </div>
                </div>
                <div class="game-card-bg" data-categories='["6號機"]'>
                    <img src="https://static.wixstatic.com/media/d5e540_1c6cd7d36cc24e47a6b359a1abeb3923~mv2.png" class="w-full h-28 object-cover">
                    <div class="p-2">
                        <h3 class="text-primary text-sm truncate">パチスロ ありふれた</h3>
                        <div class="flex items-center gap-1 mt-1"><span class="bg-blue-900/50 px-1.5 py-0.5 rounded text-xs">Olympia</span></div>
                        <div class="flex gap-1 mt-2"><button class="enter-btn" data-action="enter" data-machine="パチスロ ありふれた">進入</button></div>
                    </div>
                </div>
                <div class="game-card-bg" data-categories='["6號機"]'>
                    <img src="https://static.wixstatic.com/media/d5e540_0926089e3da443eebe6bc2ede58f5788~mv2.png" class="w-full h-28 object-cover">
                    <div class="p-2">
                        <h3 class="text-primary text-sm truncate">パチスロ 転スラ</h3>
                        <div class="flex items-center gap-1 mt-1"><span class="bg-blue-900/50 px-1.5 py-0.5 rounded text-xs">Rodeo</span></div>
                        <div class="flex gap-1 mt-2"><button class="enter-btn" data-action="enter" data-machine="パチスロ 転スラ">進入</button></div>
                    </div>
                </div>
                <div class="game-card-bg" data-categories='["6號機"]'>
                    <img src="https://static.wixstatic.com/media/d5e540_e7da9c3f1fb24a2aa9ef8d180a2cf6fa~mv2.png" class="w-full h-28 object-cover">
                    <div class="p-2">
                        <h3 class="text-primary text-sm truncate">パチスロ このすば</h3>
                        <div class="flex items-center gap-1 mt-1"><span class="bg-blue-900/50 px-1.5 py-0.5 rounded text-xs">Daito</span></div>
                        <div class="flex gap-1 mt-2"><button class="enter-btn" data-action="enter" data-machine="パチスロ このすば">進入</button></div>
                    </div>
                </div>
            </div>
        </div>
    </main>
</div>

<!-- 底部導航 -->
<nav class="bottom-nav">
    <div class="flex justify-between items-center">
        <a href="index.html" class="nav-item" id="nav-home"><i class="fa fa-home text-xl"></i><span class="text-xs mt-1">首頁</span></a>
        <a href="machines.html" class="nav-item" id="nav-game"><i class="fa fa-gamepad text-xl"></i><span class="text-xs mt-1">機台</span></a>
        <a href="news.html" class="nav-item" id="nav-bell"><i class="fa fa-bell text-xl"></i><span class="text-xs mt-1">公告</span><span class="nav-badge" id="newsBadge"></span></a>
        <a href="about.html" class="nav-item" id="nav-user"><i class="fa fa-user text-xl"></i><span class="text-xs mt-1">我的</span></a>
    </div>
</nav>

<!-- 浮動回到頂部按鈕 -->
<div class="back-to-top" id="backToTop"><i class="fa fa-arrow-up"></i></div>

<!-- 子機種彈窗 -->
<div class="machine-modal" id="machineModal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 id="modalMachineName">吉宗</h2>
            <span class="modal-close" id="modalCloseBtn"><i class="fa fa-times"></i></span>
        </div>
        <div id="modalSubmachineList" class="submachine-grid"></div>
    </div>
</div>

<!-- 點數轉代幣彈窗 (無任何滾動條) -->
<div class="convert-modal" id="convertModal">
    <div class="convert-content">
        <span class="convert-close" id="convertModalClose">&times;</span>
        <div class="convert-header">
            <h3>點數轉代幣</h3>
            <p>1 點數 = 1 代幣</p>
        </div>
        <div class="available-points-card">
            <span class="label">可用點數</span>
            <span class="value" id="availablePoints">5280</span>
        </div>
        <div class="convert-input-group">
            <input type="number" id="convertInput" placeholder="輸入點數" min="0" step="1" value="0">
        </div>
        <div class="convert-preview">
            兌換代幣 <span id="tokenPreview">0</span>
        </div>
        <div class="convert-actions">
            <button class="convert-btn secondary" id="cancelConvert">取消</button>
            <button class="convert-btn" id="confirmConvert">立即兌換</button>
        </div>
        <div class="convert-note" id="convertNote">輸入數量後點擊兌換</div>
    </div>
</div>

<!-- 炫光全像投影 Loading 動畫 -->
<div class="hologram-loading" id="hologramLoading">
    <div class="hologram-content">
        <div class="hologram-circle">
            <div class="hologram-inner-circle"></div>
            <div class="hologram-scan-line"></div>
            <div class="hologram-scan-line delay"></div>
            <div class="hologram-glow"></div>
        </div>
        <div class="hologram-text">
            <span class="glitch-text" data-text="LOADING">LOADING</span>
        </div>
        <div class="hologram-subtext">載入中......</div>
        <div class="hologram-particles">
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
        </div>
    </div>
</div>

<script>
(function() {
    // ========== 我的最愛全域同步 ==========
    const FAVORITE_STORAGE_KEY = 't Pachin_favoriteMachines';
    
    // 從 localStorage 載入我的最愛
    function loadFavorites() {
        const stored = localStorage.getItem(FAVORITE_STORAGE_KEY);
        if (stored) {
            try {
                return JSON.parse(stored);
            } catch (e) {
                return [];
            }
        }
        return [];
    }
    
    // 儲存我的最愛到 localStorage
    function saveFavorites(favorites) {
        localStorage.setItem(FAVORITE_STORAGE_KEY, JSON.stringify(favorites));
    }
    
    // 檢查機台是否在我的最愛中
    function isMachineFavorite(machineName) {
        const favorites = loadFavorites();
        return favorites.some(m => m.name === machineName);
    }
    
    // 切換我的最愛狀態
    function toggleMachineFavorite(machineName, buttonElement) {
        const favorites = loadFavorites();
        
        // 建立機台資料
        const machine = {
            id: Date.now() + Math.random(),
            name: machineName,
            image: 'https://static.wixstatic.com/media/d5e540_e7da9c3f1fb24a2aa9ef8d180a2cf6fa~mv2.png',
            ratio: '1枚=2',
            vendor: '通用'
        };
        
        const index = favorites.findIndex(m => m.name === machineName);
        
        if (index !== -1) {
            favorites.splice(index, 1);
            showFavoriteMessage('已從我的最愛移除');
            
            if (buttonElement) {
                buttonElement.classList.remove('active');
                const icon = buttonElement.querySelector('i');
                if (icon) {
                    icon.className = 'fa fa-heart-o';
                }
            }
        } else {
            favorites.push(machine);
            showFavoriteMessage('已加入我的最愛');
            
            if (buttonElement) {
                buttonElement.classList.add('active');
                const icon = buttonElement.querySelector('i');
                if (icon) {
                    icon.className = 'fa fa-heart';
                    icon.style.color = '#ef4444';
                }
            }
        }
        
        saveFavorites(favorites);
        
        // 觸發 storage 事件，通知其他頁面更新
        window.dispatchEvent(new StorageEvent('storage', {
            key: FAVORITE_STORAGE_KEY,
            newValue: JSON.stringify(favorites)
        }));
    }
    
    // 顯示提示訊息
    function showFavoriteMessage(text) {
        const msgDiv = document.createElement('div');
        msgDiv.className = 'fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-gray-900 text-white px-6 py-3 rounded-lg border-2 border-yellow-400 shadow-2xl z-50';
        msgDiv.style.background = 'linear-gradient(135deg, #000, #333)';
        msgDiv.innerHTML = `<i class="fa fa-heart text-pink-400 mr-2"></i>${text}`;
        document.body.appendChild(msgDiv);
        
        setTimeout(() => {
            msgDiv.remove();
        }, 1500);
    }
    
    // ========== 點數/代幣核心 ==========
    let points = 5280;
    const tokenBtn = document.getElementById('tokenBtn');
    
    function updatePointsDisplay() {
        if (tokenBtn) tokenBtn.textContent = points;
    }
    
    // ========== 點數轉代幣彈窗 ==========
    const convertModal = document.getElementById('convertModal');
    const convertInput = document.getElementById('convertInput');
    const availableSpan = document.getElementById('availablePoints');
    const tokenPreview = document.getElementById('tokenPreview');
    const convertNote = document.getElementById('convertNote');
    const cancelBtn = document.getElementById('cancelConvert');
    const confirmBtn = document.getElementById('confirmConvert');
    const closeBtn = document.getElementById('convertModalClose');

    if (tokenBtn) {
        tokenBtn.addEventListener('click', function(e) {
            e.preventDefault();
            convertInput.value = 0;
            availableSpan.textContent = points;
            tokenPreview.textContent = '0';
            convertNote.textContent = '輸入數量後點擊兌換';
            convertModal.classList.add('show');
        });
    }

    function closeConvertModal() {
        convertModal.classList.remove('show');
    }
    if (cancelBtn) cancelBtn.addEventListener('click', closeConvertModal);
    if (closeBtn) closeBtn.addEventListener('click', closeConvertModal);
    convertModal.addEventListener('click', (e) => {
        if (e.target === convertModal) closeConvertModal();
    });

    if (convertInput) {
        convertInput.addEventListener('input', function() {
            let val = parseInt(this.value);
            if (isNaN(val) || val < 0) val = 0;
            if (val > points) {
                val = points;
                this.value = points;
                convertNote.textContent = `⚠️ 僅剩 ${points} 點可轉換`;
            } else {
                convertNote.textContent = val === 0 ? '輸入數量後點擊兌換' : '✅ 可兌換等值代幣';
            }
            tokenPreview.textContent = val;
        });
    }

    if (confirmBtn) {
        confirmBtn.addEventListener('click', function() {
            let val = parseInt(convertInput.value);
            if (isNaN(val) || val <= 0) {
                alert('請輸入大於0的點數');
                return;
            }
            if (val > points) {
                alert(`點數不足，目前僅有 ${points} 點`);
                return;
            }
            points -= val;
            updatePointsDisplay();
            closeConvertModal();
            alert(`✨ 成功兌換 ${val} 代幣！剩餘點數 ${points}`);
        });
    }

    updatePointsDisplay();

    // ========== 篩選側拉欄 ==========
    const openBtn = document.getElementById('openDrawerBtn');
    const closeDrawerBtn = document.getElementById('closeDrawer');
    const drawer = document.getElementById('filterDrawer');
    const overlay = document.getElementById('drawerOverlay');

    if (openBtn) {
        openBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            drawer.classList.add('open');
            overlay.classList.add('open');
        });
    }
    
    if (closeDrawerBtn) {
        closeDrawerBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            drawer.classList.remove('open');
            overlay.classList.remove('open');
        });
    }
    
    if (overlay) {
        overlay.addEventListener('click', function() {
            drawer.classList.remove('open');
            overlay.classList.remove('open');
        });
    }

    // ========== 底部導航當前頁面標記 ==========
    function setCurrentNav() {
        const navItems = document.querySelectorAll('.nav-item');
        navItems.forEach(item => item.classList.remove('current-page'));
        const path = window.location.pathname;
        const filename = path.split('/').pop() || 'index.html';
        if (filename === 'index.html' || filename === '' || filename === '/') {
            document.getElementById('nav-home')?.classList.add('current-page');
        } else if (filename.includes('machines')) {
            document.getElementById('nav-game')?.classList.add('current-page');
        } else if (filename.includes('news')) {
            document.getElementById('nav-bell')?.classList.add('current-page');
        } else if (filename.includes('about')) {
            document.getElementById('nav-user')?.classList.add('current-page');
        } else {
            document.getElementById('nav-home')?.classList.add('current-page');
        }
    }
    setCurrentNav();

    const backBtn = document.getElementById('backToTop');
    window.addEventListener('scroll', () => {
        if (window.scrollY > 300) backBtn?.classList.add('show'); else backBtn?.classList.remove('show');
    });
    backBtn?.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));

    // ========== 炫光 Loading 動畫 ==========
    const hologramLoading = document.getElementById('hologramLoading');

    function showHologramLoading() {
        hologramLoading.classList.add('show');
    }

    function hideHologramLoading() {
        hologramLoading.classList.remove('show');
    }

    // ========== 子機種資料 ==========
    const submachinesData = {
        '吉宗': [
            { name: '吉宗 A', ratio: '1枚=2.1', maintenance: false },
            { name: '吉宗 B', ratio: '1枚=0.5', maintenance: true, maintenanceDate: '2026-03-15' },
            { name: '吉宗 C', ratio: '1枚=0.33', maintenance: false },
            { name: '吉宗 D', ratio: '1枚=0.25', maintenance: false }
        ],
        '甲賀忍法帖 弐': [
            { name: '甲賀 紅', ratio: '1枚=2.1', maintenance: false },
            { name: '甲賀 白', ratio: '1枚=0.5', maintenance: false },
            { name: '甲賀 黑', ratio: '1枚=0.33', maintenance: true, maintenanceDate: '2026-03-20' }
        ],
        '超級奇蹟小丑': [
            { name: '小丑 紅', ratio: '1枚=2.1', maintenance: false },
            { name: '小丑 藍', ratio: '1枚=0.5', maintenance: true, maintenanceDate: '2026-03-18' },
            { name: '小丑 綠', ratio: '1枚=0.33', maintenance: false }
        ],
        '押忍！番長4': [
            { name: '番長 4-1', ratio: '1枚=2.1', maintenance: false },
            { name: '番長 4-2', ratio: '1枚=0.5', maintenance: false },
            { name: '番長 4-3', ratio: '1枚=0.33', maintenance: true, maintenanceDate: '2026-03-25' }
        ],
        '革命機ヴァルヴレイヴ': [
            { name: '革命機 01', ratio: '1枚=2.1', maintenance: false },
            { name: '革命機 02', ratio: '1枚=0.5', maintenance: false }
        ],
        'パチスロ 幼女戦記': [
            { name: '幼女戦記 T', ratio: '1枚=2.1', maintenance: false },
            { name: '幼女戦記 Y', ratio: '1枚=0.5', maintenance: true, maintenanceDate: '2026-03-22' }
        ],
        'L 犬夜叉': [
            { name: '犬夜叉 鐵', ratio: '1枚=2.1', maintenance: false },
            { name: '犬夜叉 牙', ratio: '1枚=0.5', maintenance: false },
            { name: '犬夜叉 爪', ratio: '1枚=0.33', maintenance: false }
        ],
        'パチスロ モンキーターン': [
            { name: '猴子 轉', ratio: '1枚=2.1', maintenance: false },
            { name: '猴子 旋', ratio: '1枚=0.5', maintenance: true, maintenanceDate: '2026-03-28' }
        ],
        '押忍！番長3': [
            { name: '番長 3-1', ratio: '1枚=2.1', maintenance: false },
            { name: '番長 3-2', ratio: '1枚=0.5', maintenance: false }
        ],
        'パチスロ ガールズ＆パンツァー': [
            { name: 'GUP 01', ratio: '1枚=2.1', maintenance: false },
            { name: 'GUP 02', ratio: '1枚=0.5', maintenance: false },
            { name: 'GUP 03', ratio: '1枚=0.33', maintenance: true, maintenanceDate: '2026-04-01' }
        ],
        'パチスロ 北斗の拳': [
            { name: '北斗 拳', ratio: '1枚=2.1', maintenance: false },
            { name: '北斗 拉', ratio: '1枚=0.5', maintenance: false }
        ],
        'パチスロ 新鬼武者': [
            { name: '新鬼 武', ratio: '1枚=2.1', maintenance: false },
            { name: '新鬼 者', ratio: '1枚=0.5', maintenance: true, maintenanceDate: '2026-03-30' }
        ],
        'パチスロ 魔法少女まどか☆マギカ': [
            { name: 'まどか', ratio: '1枚=2.1', maintenance: false },
            { name: 'ほむら', ratio: '1枚=0.5', maintenance: false },
            { name: 'さやか', ratio: '1枚=0.33', maintenance: false }
        ],
        '花月': [
            { name: '花月 極', ratio: '1枚=2.1', maintenance: false },
            { name: '花月 彩', ratio: '1枚=0.5', maintenance: false }
        ],
        '大花火': [
            { name: '花火 大', ratio: '1枚=2.1', maintenance: false },
            { name: '花火 小', ratio: '1枚=0.5', maintenance: true, maintenanceDate: '2026-03-17' }
        ],
        'ドンちゃん2': [
            { name: 'Don 2-1', ratio: '1枚=2.1', maintenance: false },
            { name: 'Don 2-2', ratio: '1枚=0.5', maintenance: false }
        ],
        'アラジンA': [
            { name: 'Aladdin A1', ratio: '1枚=2.1', maintenance: false },
            { name: 'Aladdin A2', ratio: '1枚=0.5', maintenance: true, maintenanceDate: '2026-03-19' }
        ],
        'クランキーコンドル': [
            { name: 'Cranky 01', ratio: '1枚=2.1', maintenance: false },
            { name: 'Cranky 02', ratio: '1枚=0.5', maintenance: false }
        ],
        'バーサス': [
            { name: 'Versus 紅', ratio: '1枚=2.1', maintenance: false },
            { name: 'Versus 藍', ratio: '1枚=0.5', maintenance: false }
        ],
        'ニューパルサー': [
            { name: 'New Pulsar 1', ratio: '1枚=2.1', maintenance: false },
            { name: 'New Pulsar 2', ratio: '1枚=0.5', maintenance: false }
        ],
        '奇蹟小丑': [
            { name: '奇蹟 1', ratio: '1枚=2.1', maintenance: false },
            { name: '奇蹟 2', ratio: '1枚=0.5', maintenance: true, maintenanceDate: '2026-03-23' }
        ],
        '超級奇蹟': [
            { name: '超奇 1', ratio: '1枚=2.1', maintenance: false },
            { name: '超奇 2', ratio: '1枚=0.5', maintenance: false }
        ],
        'バジリスク〜甲賀忍法帖〜': [
            { name: '甲賀 參', ratio: '1枚=2.1', maintenance: false },
            { name: '甲賀 肆', ratio: '1枚=0.5', maintenance: false }
        ],
        'パチスロ エウレカセブン': [
            { name: 'Eureka 7', ratio: '1枚=2.1', maintenance: false },
            { name: 'Eureka AO', ratio: '1枚=0.5', maintenance: true, maintenanceDate: '2026-03-26' }
        ],
        'パチスロ コードギアス': [
            { name: 'Code Geass R1', ratio: '1枚=2.1', maintenance: false },
            { name: 'Code Geass R2', ratio: '1枚=0.5', maintenance: false }
        ],
        'パチスロ 戦国無双': [
            { name: '戰國 1', ratio: '1枚=2.1', maintenance: false },
            { name: '戰國 2', ratio: '1枚=0.5', maintenance: false }
        ],
        'パチスロ 蒼天の拳': [
            { name: '蒼天 拳', ratio: '1枚=2.1', maintenance: false },
            { name: '蒼天 飛', ratio: '1枚=0.5', maintenance: true, maintenanceDate: '2026-04-02' }
        ],
        '新甲賀': [
            { name: '新甲賀 1', ratio: '1枚=2.1', maintenance: false },
            { name: '新甲賀 2', ratio: '1枚=0.5', maintenance: false }
        ],
        'パチスロ ゴッドイーター': [
            { name: 'GE 神', ratio: '1枚=2.1', maintenance: false },
            { name: 'GE 喰', ratio: '1枚=0.5', maintenance: false }
        ],
        'パチスロ ダンまち': [
            { name: 'Danmachi 1', ratio: '1枚=2.1', maintenance: false },
            { name: 'Danmachi 2', ratio: '1枚=0.5', maintenance: true, maintenanceDate: '2026-03-27' }
        ],
        'L 聖戦士ダンバイン': [
            { name: 'Dunbine 1', ratio: '1枚=2.1', maintenance: false },
            { name: 'Dunbine 2', ratio: '1枚=0.5', maintenance: false }
        ],
        'パチスロ ありふれた': [
            { name: '平凡 1', ratio: '1枚=2.1', maintenance: false },
            { name: '平凡 2', ratio: '1枚=0.5', maintenance: false }
        ],
        'パチスロ 転スラ': [
            { name: '轉生 1', ratio: '1枚=2.1', maintenance: false },
            { name: '轉生 2', ratio: '1枚=0.5', maintenance: false }
        ],
        'パチスロ このすば': [
            { name: 'KonoSuba 1', ratio: '1枚=2.1', maintenance: false },
            { name: 'KonoSuba 2', ratio: '1枚=0.5', maintenance: false }
        ]
    };

    // ========== 預設資料 ==========
    function getDefaultSubmachines(machineName) {
        return [
            { name: `${machineName} 標準A`, ratio: '1枚=2.1', maintenance: false },
            { name: `${machineName} 標準B`, ratio: '1枚=0.5', maintenance: Math.random() > 0.7, maintenanceDate: '2026-03-15' },
            { name: `${machineName} 標準C`, ratio: '1枚=0.33', maintenance: false },
            { name: `${machineName} 標準D`, ratio: '1枚=0.25', maintenance: false }
        ];
    }

    // ========== 子機種彈窗 ==========
    const modal = document.getElementById('machineModal');
    const modalTitle = document.getElementById('modalMachineName');
    const modalSubList = document.getElementById('modalSubmachineList');
    const modalClose = document.getElementById('modalCloseBtn');

    function openModal(machineName) {
        modalTitle.innerText = machineName;
        
        // 立即顯示彈窗，不加載入動畫
        modal.classList.add('show');
        
        // 清空舊內容
        modalSubList.innerHTML = '';
        
        // 取得子機台資料
        let submachines = submachinesData[machineName] || getDefaultSubmachines(machineName);
        
        // 建立子機台卡片
        submachines.forEach(sub => {
            const card = document.createElement('div');
            card.className = `sub-item-card ${sub.maintenance ? 'maintenance' : ''}`;
            
            const maintenanceDate = sub.maintenance && sub.maintenanceDate ? 
                `<div class="maintenance-date"><i class="fa fa-calendar"></i> 預計 ${sub.maintenanceDate}</div>` : 
                '<div class="placeholder-date"></div>';
            
            card.innerHTML = `
                <div class="sub-name-ratio">
                    <div class="sub-name">
                        ${sub.maintenance ? '<i class="fa fa-exclamation-triangle text-red-400 mr-1"></i>' : ''}
                        ${sub.name}
                    </div>
                    <span class="sub-ratio">${sub.ratio}</span>
                </div>
                ${maintenanceDate}
                <div class="sub-actions">
                    <button class="enter-btn ${sub.maintenance ? 'maintenance' : ''}" 
                            ${sub.maintenance ? 'disabled' : ''}
                            data-action="enter-sub" 
                            data-machine="${machineName}" 
                            data-submachine="${sub.name}">
                        ${sub.maintenance ? '維護中' : '進入遊玩'}
                    </button>
                    <button class="favorite-btn" data-favorite-sub="${sub.name}">
                        <i class="fa fa-heart-o"></i>
                    </button>
                </div>
            `;
            
            modalSubList.appendChild(card);
        });
        
        // ===== 子機台的「進入遊玩」按鈕（只有這裡才需要炫光 loading） =====
        document.querySelectorAll('.sub-actions .enter-btn:not(.maintenance)').forEach(btn => {
            btn.addEventListener('click', function(e) {
                e.stopPropagation();
                const machine = this.dataset.machine;
                const submachine = this.dataset.submachine;
                
                // 顯示炫光 loading
                showHologramLoading();
                
                // 模擬載入時間（2 秒後關閉並顯示提示）
                setTimeout(() => {
                    hideHologramLoading();
                    alert(`🎮 進入 ${machine} - ${submachine}\n\n此為演示功能，實際遊玩請前往遊戲頁面。`);
                }, 2000);
            });
        });
        
        // 收藏按鈕事件 - 使用新的我的最愛功能
        document.querySelectorAll('.sub-actions .favorite-btn').forEach(btn => {
            // 檢查是否已經在最愛中
            if (isMachineFavorite(machineName)) {
                btn.classList.add('active');
                const icon = btn.querySelector('i');
                if (icon) {
                    icon.className = 'fa fa-heart';
                    icon.style.color = '#ef4444';
                }
            }
            
            btn.addEventListener('click', function(e) {
                e.stopPropagation();
                toggleMachineFavorite(machineName, this);
            });
        });
    }
    
    function closeModal() { 
        modal.classList.remove('show');
    }

    if (modalClose) modalClose.addEventListener('click', closeModal);
    modal.addEventListener('click', (e) => { if (e.target === modal) closeModal(); });

    // ========== 主機台進入按鈕事件（不加載入動畫） ==========
    document.querySelectorAll('.enter-btn').forEach(btn => {
        btn.addEventListener('click', function(e) {
            e.stopPropagation();
            
            let machineName = this.dataset.machine || 
                             this.closest('.game-card-bg')?.querySelector('h3')?.textContent.trim() || 
                             '機台';
            
            // 直接開啟子機台彈窗，不加載入動畫
            openModal(machineName);
        });
    });

    // ========== 卡片點擊事件（不加載入動畫） ==========
    document.querySelectorAll('.game-card-bg').forEach(card => {
        card.addEventListener('click', function(e) {
            if (e.target.closest('button')) return;
            
            const titleElem = this.querySelector('h3');
            if (titleElem) {
                const machineName = titleElem.textContent.trim();
                
                // 顯示卡片按下效果
                this.style.transform = 'scale(0.98)';
                setTimeout(() => {
                    this.style.transform = '';
                }, 150);
                
                // 直接開啟子機台彈窗
                openModal(machineName);
            }
        });
    });

    // ========== 新機滑動功能 ==========
    const newWrapper = document.getElementById('newWrapper');
    const newPrev = document.getElementById('newPrev');
    const newNext = document.getElementById('newNext');
    const newDots = document.querySelectorAll('#newDots .slider-dot');
    
    if (newWrapper && newPrev && newNext) {
        const scrollAmount = 200;
        
        newPrev.addEventListener('click', () => {
            newWrapper.scrollBy({ left: -scrollAmount, behavior: 'smooth' });
        });
        
        newNext.addEventListener('click', () => {
            newWrapper.scrollBy({ left: scrollAmount, behavior: 'smooth' });
        });
        
        newWrapper.addEventListener('scroll', () => {
            const scrollLeft = newWrapper.scrollLeft;
            const maxScroll = newWrapper.scrollWidth - newWrapper.clientWidth;
            const scrollPercentage = scrollLeft / maxScroll;
            const activeIndex = Math.round(scrollPercentage * (newDots.length - 1));
            
            newDots.forEach((dot, index) => {
                if (index === activeIndex) {
                    dot.classList.add('active');
                } else {
                    dot.classList.remove('active');
                }
            });
        });
        
        newDots.forEach((dot, index) => {
            dot.addEventListener('click', () => {
                const itemWidth = newWrapper.scrollWidth / newDots.length;
                newWrapper.scrollTo({ left: itemWidth * index, behavior: 'smooth' });
            });
        });
    }

    // ========== Banner 輪播 ==========
    const bannerSlider = document.getElementById('bannerSlider');
    const bannerDots = document.querySelectorAll('.banner-dot');
    const bannerTouchArea = document.getElementById('bannerTouchArea');
    
    if (bannerSlider && bannerDots.length) {
        let currentSlide = 0;
        let startX = 0;
        let isDragging = false;
        
        function goToSlide(index) {
            if (index < 0) index = 0;
            if (index >= bannerDots.length) index = bannerDots.length - 1;
            
            currentSlide = index;
            bannerSlider.style.transform = `translateX(-${currentSlide * 100}%)`;
            
            bannerDots.forEach((dot, i) => {
                if (i === currentSlide) {
                    dot.classList.add('active');
                } else {
                    dot.classList.remove('active');
                }
            });
        }
        
        bannerDots.forEach((dot, index) => {
            dot.addEventListener('click', (e) => {
                e.stopPropagation();
                goToSlide(index);
            });
        });
        
        if (bannerTouchArea) {
            bannerTouchArea.addEventListener('touchstart', (e) => {
                startX = e.touches[0].clientX;
                isDragging = true;
            }, { passive: true });
            
            bannerTouchArea.addEventListener('touchmove', (e) => {
                if (!isDragging) return;
                e.preventDefault();
            }, { passive: false });
            
            bannerTouchArea.addEventListener('touchend', (e) => {
                if (!isDragging) return;
                
                const endX = e.changedTouches[0].clientX;
                const diffX = endX - startX;
                
                if (Math.abs(diffX) > 50) {
                    if (diffX > 0 && currentSlide > 0) {
                        goToSlide(currentSlide - 1);
                    } else if (diffX < 0 && currentSlide < bannerDots.length - 1) {
                        goToSlide(currentSlide + 1);
                    }
                }
                
                isDragging = false;
            }, { passive: true });
        }
        
        setInterval(() => {
            let nextSlide = (currentSlide + 1) % bannerDots.length;
            goToSlide(nextSlide);
        }, 5000);
    }

    // ========== 標籤切換 ==========
    const tabs = document.querySelectorAll('.tab-btn');
    const tabIndicator = document.getElementById('tabIndicator');
    const tabsWrapper = document.getElementById('tabsWrapper');
    const categorySections = document.querySelectorAll('.category-section');
    const newSliderMode = document.querySelector('.new-slider-mode');
    const newVerticalMode = document.querySelector('.new-vertical-mode');
    
    if (tabs.length && tabIndicator && tabsWrapper) {
        function updateActiveTab(activeTab) {
            // 更新按鈕樣式
            tabs.forEach(tab => {
                tab.classList.remove('tech-tab-active');
                tab.classList.add('bg-dark-200', 'tech-border');
            });
            
            activeTab.classList.remove('bg-dark-200', 'tech-border');
            activeTab.classList.add('tech-tab-active');
            
            // 更新指示器位置
            const tabRect = activeTab.getBoundingClientRect();
            const wrapperRect = tabsWrapper.getBoundingClientRect();
            
            tabIndicator.style.width = `${tabRect.width}px`;
            tabIndicator.style.left = `${tabRect.left - wrapperRect.left}px`;
            
            // 滾動到可見區域
            const scrollLeft = tabsWrapper.scrollLeft;
            const tabLeft = activeTab.offsetLeft;
            const tabRight = tabLeft + activeTab.offsetWidth;
            const wrapperWidth = tabsWrapper.clientWidth;
            
            if (tabLeft < scrollLeft) {
                tabsWrapper.scrollTo({ left: tabLeft - 10, behavior: 'smooth' });
            } else if (tabRight > scrollLeft + wrapperWidth) {
                tabsWrapper.scrollTo({ left: tabRight - wrapperWidth + 10, behavior: 'smooth' });
            }
            
            // 切換新機區塊顯示模式
            const tabText = activeTab.dataset.tab;
            
            // 新機區塊：全部標籤顯示滑動模式，新機標籤顯示垂直模式
            if (newSliderMode && newVerticalMode) {
                if (tabText === '全部') {
                    newSliderMode.style.display = 'block';
                    newVerticalMode.style.display = 'none';
                } else if (tabText === '新機') {
                    newSliderMode.style.display = 'none';
                    newVerticalMode.style.display = 'grid';
                } else {
                    // 其他標籤時隱藏新機區塊（因為要顯示其他分類）
                    newSliderMode.style.display = 'none';
                    newVerticalMode.style.display = 'none';
                }
            }
            
            // 顯示/隱藏分類區塊
            categorySections.forEach(section => {
                const category = section.dataset.category;
                
                if (tabText === '全部') {
                    section.style.display = 'block';
                } else if (tabText === category) {
                    section.style.display = 'block';
                } else {
                    section.style.display = 'none';
                }
            });
        }
        
        // 初始化
        const defaultTab = document.querySelector('.tab-btn[data-tab="全部"]') || tabs[0];
        updateActiveTab(defaultTab);
        
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                updateActiveTab(tab);
            });
        });
        
        // 視窗大小改變時更新指示器
        window.addEventListener('resize', () => {
            const activeTab = document.querySelector('.tab-btn.tech-tab-active');
            if (activeTab) {
                const tabRect = activeTab.getBoundingClientRect();
                const wrapperRect = tabsWrapper.getBoundingClientRect();
                
                tabIndicator.style.width = `${tabRect.width}px`;
                tabIndicator.style.left = `${tabRect.left - wrapperRect.left}px`;
            }
        });
    }

    // ========== 篩選功能 ==========
    const filterChips = document.querySelectorAll('.filter-chip');
    const resetFiltersBtn = document.getElementById('resetFilters');
    const applyFiltersBtn = document.getElementById('applyFilters');
    const clearAllBtn = document.getElementById('clearAllFilters');
    
    if (filterChips.length) {
        filterChips.forEach(chip => {
            chip.addEventListener('click', function() {
                this.classList.toggle('selected');
            });
        });
    }
    
    if (resetFiltersBtn) {
        resetFiltersBtn.addEventListener('click', () => {
            filterChips.forEach(chip => {
                chip.classList.remove('selected');
            });
        });
    }
    
    if (clearAllBtn) {
        clearAllBtn.addEventListener('click', () => {
            filterChips.forEach(chip => {
                chip.classList.remove('selected');
            });
        });
    }
    
    if (applyFiltersBtn) {
        applyFiltersBtn.addEventListener('click', () => {
            const selectedFilters = [];
            filterChips.forEach(chip => {
                if (chip.classList.contains('selected')) {
                    selectedFilters.push(chip.textContent.trim());
                }
            });
            
            alert(`套用篩選條件: ${selectedFilters.length ? selectedFilters.join(', ') : '無'}\n\n此為演示功能，實際篩選請串接後端資料。`);
            
            drawer.classList.remove('open');
            overlay.classList.remove('open');
        });
    }

    // ========== 其他功能 ==========
    const nicknameBtn = document.getElementById('nicknameBtn');
    if (nicknameBtn) {
        nicknameBtn.addEventListener('click', (e) => {
            e.preventDefault();
            alert('👤 會員中心\n\n此為演示畫面，實際功能請串接後端。');
        });
    }

    const logoHomeBtn = document.getElementById('logoHomeBtn');
    if (logoHomeBtn) {
        logoHomeBtn.addEventListener('click', (e) => {
            e.preventDefault();
            window.scrollTo({ top: 0, behavior: 'smooth' });
            setTimeout(() => {
                location.reload();
            }, 300);
        });
    }

    const newsBadge = document.getElementById('newsBadge');
    if (newsBadge) {
        newsBadge.style.display = 'block';
    }

    // ========== 監聽其他頁面的最愛變更 ==========
    window.addEventListener('storage', function(e) {
        if (e.key === FAVORITE_STORAGE_KEY) {
            console.log('我的最愛已更新 from other tab');
            // 可以視需要更新當前頁面的最愛按鈕狀態
        }
    });
})();
</script>
</body>
</html>
