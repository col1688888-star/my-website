<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>æˆ‘çš„ Â· é»æ•¸é›™å‘ï½œå„ªåŒ–æ˜ç´°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <style>
        /* ===== å®Œæ•´ä¿ç•™åŸæ¨£å¼ ===== */
        .tech-gradient { background: linear-gradient(180deg, #000814 0%, #001233 50%, #001845 100%); }
        .tech-border { border: 1px solid rgba(0, 148, 255, 0.4); }
        body.dark-mode .tech-gradient { background: linear-gradient(180deg, #1a2a3a 0%, #1f3a5f 50%, #2c4c6b 100%); }
        body.dark-mode .game-card-bg { background: linear-gradient(180deg, rgba(40, 70, 100, 0.8) 0%, rgba(20, 50, 80, 0.9) 100%); }
        body.dark-mode .filter-drawer { background: linear-gradient(165deg, #2a3f5a 0%, #1b2b40 100%); }
        body.dark-mode .bottom-nav { background: #2c4058; border-top-color: #3399ff; }
        .game-card-bg { background: linear-gradient(180deg, rgba(0, 30, 60, 0.8) 0%, rgba(0, 15, 30, 0.9) 100%); transition: background 0.3s ease; }
        .filter-drawer { position: fixed; top: 0; right: -100%; width: 85%; max-width: 340px; height: 100vh; background: linear-gradient(165deg, #001a33 0%, #000a1a 100%); border-left: 2px solid #0099ff; box-shadow: -5px 0 30px rgba(0, 153, 255, 0.5); z-index: 10000; transition: right 0.3s ease; overflow-y: auto; padding: 1.5rem; }
        .filter-drawer.open { right: 0; }
        .drawer-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.7); backdrop-filter: blur(3px); z-index: 9999; display: none; }
        .drawer-overlay.open { display: block; }
        .filter-chip { background: rgba(0, 40, 70, 0.8); border: 1px solid #0099ff60; border-radius: 9999px; padding: 0.4rem 1.2rem; font-size: 0.75rem; color: #cce6ff; transition: all 0.2s; cursor: pointer; display: inline-block; }
        
        /* ===== å„ªåŒ–å¾Œçš„æ»¾é‚Šæ¢æ¨£å¼ ===== */
        .scrollbar-beauty {
            scrollbar-width: thin;
            scrollbar-color: #00aaff #002a4a;
        }
        .scrollbar-beauty::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }
        .scrollbar-beauty::-webkit-scrollbar-track {
            background: linear-gradient(180deg, #001a33, #002a4a);
            border-radius: 20px;
            border: 1px solid #0099ff30;
            margin: 4px 0;
        }
        .scrollbar-beauty::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #00aaff, #0066cc);
            border-radius: 20px;
            border: 1px solid #80e4ff;
            box-shadow: 0 0 8px #00aaff;
        }
        .scrollbar-beauty::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, #33ccff, #0088ee);
            box-shadow: 0 0 12px #33ccff;
        }
        .scrollbar-beauty::-webkit-scrollbar-button {
            display: none;
        }
        
        /* é‡å°æ©«å‘æ»¾è¼ª */
        .scrollbar-beauty-x {
            scrollbar-width: thin;
            scrollbar-color: #00aaff #002a4a;
        }
        .scrollbar-beauty-x::-webkit-scrollbar {
            height: 6px;
        }
        .scrollbar-beauty-x::-webkit-scrollbar-track {
            background: linear-gradient(90deg, #001a33, #002a4a);
            border-radius: 20px;
            border: 1px solid #0099ff30;
        }
        .scrollbar-beauty-x::-webkit-scrollbar-thumb {
            background: linear-gradient(90deg, #00aaff, #0066cc);
            border-radius: 20px;
            border: 1px solid #80e4ff;
            box-shadow: 0 0 8px #00aaff;
        }
        
        /* æ‡‰ç”¨æ»¾é‚Šæ¢åˆ°æ‰€æœ‰éœ€è¦æ»¾å‹•çš„å€åŸŸ */
        .scrollable-area {
            overflow-y: auto;
            overflow-x: hidden;
            scrollbar-width: thin;
            scrollbar-color: #00aaff #002a4a;
        }
        .scrollable-area::-webkit-scrollbar {
            width: 6px;
        }
        .scrollable-area::-webkit-scrollbar-track {
            background: linear-gradient(180deg, #001a33, #002a4a);
            border-radius: 20px;
            border: 1px solid #0099ff30;
        }
        .scrollable-area::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #00aaff, #0066cc);
            border-radius: 20px;
            border: 1px solid #80e4ff;
            box-shadow: 0 0 8px #00aaff;
        }
        
        .bottom-nav { background: #001a33; border-top: 2px solid #0066cc; box-shadow: 0 -2px 10px rgba(0, 102, 204, 0.3); width: 100%; max-width: 448px; padding: 0.75rem 1.5rem; margin-top: 1rem; transition: background 0.3s ease, border-top-color 0.3s ease; }
        .nav-item { position: relative; display: flex; flex-direction: column; align-items: center; color: #4b9cd3; transition: all 0.2s ease; border-radius: 8px; padding: 0.25rem 0.5rem; text-decoration: none; outline: none; }
        .nav-item:hover { color: #80e4ff; transform: translateY(-2px); text-shadow: 0 0 6px #00ccff; background: rgba(0, 153, 255, 0.15); }
        .nav-item:active { transform: scale(0.95); color: white; background: rgba(0, 204, 255, 0.3); }
        .nav-item.current-page { color: white; background: linear-gradient(90deg, #0066cc 0%, #0099ff 100%); border: 1px solid #80e4ff; box-shadow: 0 0 12px #00ccff; transform: scale(1.02); }
        .nav-badge { position: absolute; top: 0px; right: 0px; width: 10px; height: 10px; background-color: #ff3b3b; border-radius: 50%; border: 2px solid #001a33; box-shadow: 0 0 8px #ff0000; display: none; z-index: 25; }
        .nav-item.current-page .nav-badge { border-color: #0066cc; }
        .action-grid-btn { background: rgba(0, 30, 60, 0.8); border: 1px solid #0099ff60; border-radius: 16px; padding: 1rem 0.5rem; text-align: center; transition: all 0.2s; color: #cce6ff; font-size: 0.9rem; backdrop-filter: blur(4px); cursor: pointer; user-select: none; position: relative; }
        .action-grid-btn i { display: block; font-size: 1.8rem; margin-bottom: 6px; color: #ffd966; }
        .action-grid-btn:active { transform: scale(0.94); background: #0099ff60; border-color: #00ccff; box-shadow: 0 0 12px #00ccff; }
        .count-badge { position: absolute; top: 8px; right: 12px; background: #ff4444; color: white; font-size: 0.7rem; font-weight: bold; min-width: 22px; height: 22px; border-radius: 30px; display: flex; align-items: center; justify-content: center; padding: 0 6px; border: 1px solid #ffd966; box-shadow: 0 0 8px #ff4444; animation: pulse 2s infinite; }
        .count-badge.keep { background: #ff9900; box-shadow: 0 0 8px #ff9900; }
        @keyframes pulse { 0% { opacity: 0.9; transform: scale(1); } 50% { opacity: 1; transform: scale(1.1); } 100% { opacity: 0.9; transform: scale(1); } }
        .machine-card { background: rgba(0, 40, 70, 0.7); border: 1px solid #0099ff60; border-radius: 12px; padding: 0.8rem; display: flex; gap: 12px; align-items: center; transition: 0.2s; backdrop-filter: blur(4px); position: relative; }
        .machine-card:active { transform: scale(0.98); background: #0099ff30; }
        .machine-card img { width: 60px; height: 60px; border-radius: 10px; object-fit: cover; border: 1px solid #0099ff; }
        .machine-info { flex: 1; }
        .machine-name { font-weight: bold; color: #ffd966; font-size: 1rem; }
        .machine-meta { display: flex; gap: 8px; margin-top: 4px; font-size: 0.7rem; color: #b0d4ff; }
        .machine-meta span { background: rgba(0, 153, 255, 0.2); padding: 0.2rem 0.6rem; border-radius: 30px; border: 1px solid #0099ff40; }
        .countdown-timer { font-size: 0.7rem; color: #ffaa00; background: rgba(0, 0, 0, 0.4); padding: 0.2rem 0.6rem; border-radius: 30px; border: 1px solid #ffaa00; display: inline-flex; align-items: center; gap: 4px; margin-top: 6px; width: fit-content; }
        .countdown-timer i { color: #ffaa00; font-size: 0.6rem; }
        .countdown-timer.warning { color: #ff6666; border-color: #ff6666; animation: blink 1s infinite; }
        .countdown-timer.warning i { color: #ff6666; }
        @keyframes blink { 0% { opacity: 1; } 50% { opacity: 0.6; } 100% { opacity: 1; } }
        .machine-actions { display: flex; flex-direction: column; gap: 6px; margin-left: 4px; }
        
        /* é€²å…¥æŒ‰éˆ•æ¨£å¼ - ç¶ è‰² */
        .play-btn { 
            background: linear-gradient(135deg, #00cc66, #009933); 
            border: 1px solid #80ff80; 
            color: white; 
            font-size: 0.8rem; 
            padding: 6px 12px; 
            border-radius: 30px; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            gap: 4px; 
            cursor: pointer; 
            box-shadow: 0 0 8px #00ff80; 
            transition: 0.15s; 
            white-space: nowrap; 
            min-width: 70px;
        }
        .play-btn:active { 
            transform: scale(0.9); 
            background: #00ff80; 
            color: #000; 
        }
        .play-btn i { 
            font-size: 0.8rem; 
        }
        
        /* é›¢é–‹æŒ‰éˆ•æ¨£å¼ - ç´…è‰²ï¼Œèˆ‡é€²å…¥æŒ‰éˆ•ç›¸åŒå¤§å° */
        .leave-btn { 
            background: linear-gradient(135deg, #ff4d4d, #cc0000); 
            border: 1px solid #ff9999; 
            color: white; 
            font-size: 0.8rem; 
            padding: 6px 12px; 
            border-radius: 30px; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            gap: 4px; 
            cursor: pointer; 
            box-shadow: 0 0 8px #ff4d4d; 
            transition: 0.15s; 
            white-space: nowrap; 
            min-width: 70px;
        }
        .leave-btn:active { 
            transform: scale(0.9); 
            background: #ff6666; 
            color: #000; 
        }
        .leave-btn i { 
            font-size: 0.8rem; 
        }
        
        /* å–æ¶ˆæ”¶è—æŒ‰éˆ•æ¨£å¼ - ç²‰ç´…è‰² */
        .unfavorite-btn {
            background: linear-gradient(135deg, #ff6680, #cc3355);
            border: 1px solid #ff99aa;
            color: white;
            font-size: 0.8rem;
            padding: 6px 12px;
            border-radius: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
            cursor: pointer;
            box-shadow: 0 0 8px #ff6680;
            transition: 0.15s;
            white-space: nowrap;
            min-width: 70px;
        }
        .unfavorite-btn:active {
            transform: scale(0.9);
            background: #ff88aa;
            color: #000;
        }
        .unfavorite-btn i {
            font-size: 0.8rem;
        }
        
        .remove-btn { 
            display: none; 
        }
        
        .machine-list-container { margin-top: 1rem; display: none; }
        .machine-list-container.show { display: block; }
        .machine-list { display: flex; flex-direction: column; gap: 10px; max-height: 350px; overflow-y: auto; padding-right: 4px; }
        .list-title { color: #80e4ff; font-size: 0.9rem; margin-bottom: 8px; display: flex; align-items: center; gap: 6px; }
        .nickname-edit { cursor: pointer; transition: 0.1s; border-bottom: 1px dashed #aaa; }
        .home-return-btn { background: rgba(0, 153, 255, 0.25); border: 1.5px solid #80e4ff; color: #ffd966; width: 44px; height: 44px; border-radius: 30px; display: flex; align-items: center; justify-content: center; font-size: 1.6rem; box-shadow: 0 0 12px #00aaff; backdrop-filter: blur(4px); transition: 0.15s; text-decoration: none; }
        .avatar-container { position: relative; width: 70px; height: 70px; border-radius: 9999px; border: 3px solid #0099ff; box-shadow: 0 0 15px #00ccff; background: #001d3d; overflow: hidden; cursor: pointer; }
        .avatar-container img { width: 100%; height: 100%; object-fit: cover; }
        .avatar-overlay { position: absolute; bottom: 0; left: 0; right: 0; background: rgba(0, 100, 200, 0.8); color: white; font-size: 0.7rem; text-align: center; padding: 3px 0; backdrop-filter: blur(2px); }
        .profile-tab { flex: 1; text-align: center; padding: 0.7rem 0; border-radius: 40px; background: transparent; border: 1px solid #0099ff40; color: #b0d4ff; font-weight: 500; transition: 0.2s; cursor: pointer; }
        .profile-tab.active { background: #0066cc; border-color: #80e4ff; color: white; box-shadow: 0 0 10px #00ccff; }
        .lang-select { background: rgba(0, 30, 60, 0.9); border: 1px solid #0099ff; border-radius: 40px; padding: 0.6rem 2rem 0.6rem 1.2rem; font-size: 0.9rem; color: #e0f0ff; width: 100%; appearance: none; background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%230099ff' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='6 9 12 15 18 9'/></svg>"); background-repeat: no-repeat; background-position: right 0.8rem center; background-size: 1.2rem; cursor: pointer; }
        .theme-switch { width: 48px; height: 24px; background-color: #1e3a5f; border-radius: 40px; border: 1px solid #0099ff; position: relative; cursor: pointer; }
        .theme-switch .thumb { width: 20px; height: 20px; background-color: #ffd966; border-radius: 50%; position: absolute; top: 1px; left: 2px; transition: left 0.2s; }
        body.dark-mode .theme-switch .thumb { left: 26px; background-color: #cce6ff; }
        .vip-badge { background: linear-gradient(135deg, #b8860b, #ffd700); color: #000; font-weight: bold; padding: 0.15rem 0.6rem; border-radius: 30px; font-size: 0.7rem; box-shadow: 0 0 8px #ffaa00; cursor: pointer; }
        .exp-text { font-size: 0.7rem; color: #b0d4ff; cursor: pointer; }
        .progress-bar { width: 100%; height: 6px; background: rgba(0, 50, 100, 0.5); border-radius: 10px; overflow: hidden; border: 1px solid #0099ff60; }
        .progress-fill { height: 100%; width: 68%; background: linear-gradient(90deg, #ffd966, #ffaa33); border-radius: 10px; }
        .vip-info-panel { background: rgba(0, 20, 40, 0.95); border: 2px solid #ffd966; border-radius: 16px; padding: 1rem; margin: 0.5rem 0; box-shadow: 0 0 20px #ffaa33; backdrop-filter: blur(8px); display: none; }
        .vip-info-panel.show { display: block; }
        .vip-tier { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #0099ff60; padding: 0.5rem 0; }
        .banner-area { width: 100%; height: auto; background: linear-gradient(145deg, #002244, #001133); border: 1px solid #0099ff60; border-radius: 12px; padding: 0.75rem 0.5rem; }
        .sub-tab { background: rgba(0, 30, 60, 0.5); border: 1px solid #0099ff40; border-radius: 30px; padding: 0.3rem 1rem; font-size: 0.75rem; color: #b0d4ff; cursor: pointer; transition: 0.2s; text-align: center; }
        .sub-tab.active { background: #0066cc; border-color: #80e4ff; color: white; box-shadow: 0 0 6px #00ccff; }
        .bet-id { font-size: 0.9rem; font-weight: 600; color: #aad0ff; letter-spacing: 0.5px; }
        .detail-bb { color: #ffaa33; font-weight: bold; border-bottom: 1px dashed #ffaa33; cursor: pointer; font-size: 0.8rem; margin-left: 6px; white-space: nowrap; }
        .pagination { display: flex; justify-content: center; gap: 8px; margin-top: 16px; flex-wrap: wrap; }
        .page-btn { background: rgba(0, 40, 70, 0.8); border: 1px solid #0099ff60; border-radius: 30px; padding: 0.3rem 0.8rem; font-size: 0.8rem; color: #cce6ff; cursor: pointer; transition: 0.2s; min-width: 36px; text-align: center; }
        .page-btn.active { background: #0066cc; border-color: #80e4ff; color: white; box-shadow: 0 0 6px #00ccff; }
        .page-btn:active { transform: scale(0.92); }
        .platform-item { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #1f4a7a; padding: 10px 0; font-size: 0.85rem; cursor: pointer; transition: 0.2s; border-radius: 8px; padding-left: 6px; position: relative; }
        .platform-item:hover { background: rgba(0, 153, 255, 0.15); }
        .platform-item .chevron-icon { transition: transform 0.2s; }
        .platform-item.expanded .chevron-icon { transform: rotate(90deg); }
        .platform-left { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; }
        .platform-tag { font-weight: bold; padding: 2px 8px; border-radius: 20px; font-size: 0.7rem; min-width: 45px; text-align: center; }
        .platform-tag.out { background: #00a86b20; border: 1px solid #00cc88; color: #a0ffc0; }
        .platform-tag.in { background: #cc555020; border: 1px solid #ff6666; color: #ffb0b0; }
        .platform-machine { color: #ffd966; background: rgba(0, 153, 255, 0.15); border-radius: 16px; padding: 0.1rem 0.6rem; font-size: 0.75rem; font-weight: 500; }
        .platform-amount { font-weight: 600; margin-left: auto; padding-right: 8px; }
        .platform-detail { background: rgba(0, 20, 40, 0.9); border-left: 3px solid #0099ff; border-radius: 0 0 12px 12px; padding: 12px 15px; margin-top: 8px; margin-bottom: 8px; font-size: 0.85rem; display: none; }
        .platform-item.expanded + .platform-detail { display: block; }
        .platform-detail-row { display: flex; justify-content: space-between; margin: 6px 0; }
        .platform-detail-label { color: #aaccff; }
        .platform-detail-value { font-weight: 600; color: #ffd966; }
        .platform-detail-change { font-weight: 600; }
        .platform-detail-change.positive { color: #88ff88; }
        .platform-detail-change.negative { color: #ff8888; }
        .filter-row { display: flex; gap: 8px; margin: 10px 0 15px 0; flex-wrap: wrap; }
        .filter-select, .filter-date { background: #003366 !important; border: 2px solid #66ccff !important; border-radius: 30px; padding: 0.4rem 1rem; font-size: 0.8rem; color: #ffffff !important; cursor: pointer; flex: 1 1 auto; font-weight: 500; box-shadow: 0 0 8px #3399ff; }
        .filter-date { min-width: 130px; }
        .filter-select option { background: #004488; color: white; }
        input[type="date"]::-webkit-calendar-picker-indicator { filter: invert(1); opacity: 0.8; cursor: pointer; }
        input[type="date"]::-webkit-calendar-picker-indicator:hover { opacity: 1; }
        .current-balance { background: rgba(0, 153, 255, 0.15); border-radius: 30px; padding: 0.5rem 1rem; margin-bottom: 15px; border: 1px solid #0099ff60; display: flex; justify-content: space-between; align-items: center; }
        .balance-number { font-size: 1.2rem; font-weight: bold; color: #ffd966; text-shadow: 0 0 5px #ffaa00; }
        .formula-box { background: rgba(0, 20, 40, 0.7); border: 1px solid #0099ff60; border-radius: 16px; padding: 10px; margin-bottom: 15px; text-align: center; font-size: 0.8rem; line-height: 1.5; }
        .formula-highlight { color: #ffd966; font-weight: bold; font-size: 0.9rem; }
        .uniform-section { margin-bottom: 8px; }
        .uniform-header { display: flex; align-items: center; justify-content: space-between; background: rgba(0, 50, 80, 0.6); border: 1px solid #0099ff60; border-radius: 30px; padding: 10px 15px; cursor: pointer; transition: 0.2s; }
        .uniform-header:hover { background: rgba(0, 80, 120, 0.8); }
        .uniform-header .chevron { transition: transform 0.3s; }
        .uniform-header.collapsed .chevron { transform: rotate(-90deg); }
        .uniform-header-left { display: flex; align-items: center; gap: 10px; }
        .uniform-title { font-size: 0.95rem; font-weight: 500; }
        .uniform-content { transition: all 0.3s; overflow: hidden; padding: 5px 0; }
        .uniform-content.collapsed { display: none; }
        .records-title { font-size: 0.95rem; font-weight: 500; color: #b0d4ff; margin: 15px 0 10px 0; padding-left: 5px; border-left: 3px solid #0099ff; padding-left: 10px; }
        .source-detail-item { display: flex; justify-content: space-between; align-items: center; padding: 10px 15px; border-bottom: 1px solid #1f4a7a; font-size: 0.85rem; background: rgba(0, 30, 50, 0.4); }
        .source-detail-item:last-child { border-bottom: none; }
        .source-detail-date { color: #aaccff; }
        .source-detail-amount { font-weight: 600; }
        .hidden { display: none !important; }
        
        /* ===== è¼¸å…¥æ¡†æ¨£å¼ ===== */
        .input-panel {
            background: #002b4a;
            border: 2px solid #0099ff;
            border-radius: 30px;
            padding: 1rem;
            margin: 0.5rem 0;
        }
        .number-input {
            background: #001d33;
            border: 1px solid #33ccff;
            border-radius: 40px;
            padding: 0.8rem 1.2rem;
            font-size: 1.8rem;
            font-weight: 800;
            color: #ffd966;
            width: 100%;
            text-align: center;
            margin-bottom: 1rem;
            font-family: monospace;
        }
        .number-input:focus {
            outline: none;
            border-color: #ffaa33;
            box-shadow: 0 0 10px #ffaa33;
        }
        .input-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
        }
        .action-btn {
            border: none;
            border-radius: 40px;
            padding: 0.8rem 2rem;
            font-weight: bold;
            color: white;
            cursor: pointer;
            transition: 0.15s;
            flex: 1;
            font-size: 1.1rem;
        }
        .action-btn.in {
            background: linear-gradient(145deg, #00b37a, #00875a);
        }
        .action-btn.out {
            background: linear-gradient(145deg, #ff8800, #cc6600);
        }
        .action-btn.max {
            background: linear-gradient(145deg, #ffaa33, #ff8800);
        }
        .action-btn:active {
            transform: scale(0.96);
        }
        .remain-badge {
            background: #004d80;
            border-radius: 30px;
            padding: 0.5rem 1rem;
            text-align: center;
            font-size: 1.1rem;
            border: 1px solid #ffaa33;
            margin-top: 0.8rem;
        }

        /* æ©Ÿå°å¡ç‰‡ */
        .machine-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin: 15px 0;
        }
        .machine-card-item {
            background: #003d66;
            border: 2px solid #0099ff;
            border-radius: 20px;
            padding: 1rem 0.5rem;
            text-align: center;
            cursor: pointer;
            transition: 0.2s;
        }
        .machine-card-item:hover {
            transform: scale(1.02);
            border-color: #ffaa33;
        }
        .machine-card-item.selected {
            border-color: #ffaa33;
            background: #004d80;
            box-shadow: 0 0 15px #ffaa33;
        }
        .machine-name-text {
            font-size: 0.9rem;
            font-weight: 600;
            color: #ffd966;
            margin-bottom: 5px;
        }
        .machine-points {
            font-size: 1.2rem;
            font-weight: 800;
            color: #33ccff;
        }
        .machine-label {
            font-size: 0.7rem;
            color: #aaccff;
        }

        /* è¡¨æ ¼æ˜ç´°æ¨£å¼ */
        .detail-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.8rem;
        }
        .detail-table th {
            text-align: left;
            padding: 0.5rem 0.3rem;
            color: #80e4ff;
            font-weight: 500;
            border-bottom: 1px solid #1f4a7a;
        }
        .detail-table td {
            padding: 0.5rem 0.3rem;
            border-bottom: 1px solid #1f4a7a;
        }
        .detail-table tr:last-child td {
            border-bottom: none;
        }
        .machine-badge {
            display: inline-block;
            padding: 0.15rem 0.6rem;
            border-radius: 30px;
            font-size: 0.7rem;
            background: #ffaa3320;
            border: 1px solid #ffaa33;
            color: #ffd966;
        }
        .total-row {
            background: #003355;
            font-weight: 600;
        }

        /* ç‚ºä¸»è¦å…§å®¹å€åŸŸå¥—ç”¨å„ªé›…æ»¾é‚Šæ¢ */
        #profileContentArea {
            scrollbar-width: thin;
            scrollbar-color: #00aaff #002a4a;
        }
        #profileContentArea::-webkit-scrollbar {
            width: 6px;
        }
        #profileContentArea::-webkit-scrollbar-track {
            background: linear-gradient(180deg, #001a33, #002a4a);
            border-radius: 20px;
            border: 1px solid #0099ff30;
        }
        #profileContentArea::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #00aaff, #0066cc);
            border-radius: 20px;
            border: 1px solid #80e4ff;
            box-shadow: 0 0 8px #00aaff;
        }
        
        /* ç‚ºæ‰€æœ‰éœ€è¦æ»¾å‹•çš„å®¹å™¨å¥—ç”¨ */
        .machine-list, .platform-list, .filter-drawer {
            scrollbar-width: thin;
            scrollbar-color: #00aaff #002a4a;
        }
        .machine-list::-webkit-scrollbar,
        .platform-list::-webkit-scrollbar,
        .filter-drawer::-webkit-scrollbar {
            width: 6px;
        }
        .machine-list::-webkit-scrollbar-track,
        .platform-list::-webkit-scrollbar-track,
        .filter-drawer::-webkit-scrollbar-track {
            background: linear-gradient(180deg, #001a33, #002a4a);
            border-radius: 20px;
            border: 1px solid #0099ff30;
        }
        .machine-list::-webkit-scrollbar-thumb,
        .platform-list::-webkit-scrollbar-thumb,
        .filter-drawer::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #00aaff, #0066cc);
            border-radius: 20px;
            border: 1px solid #80e4ff;
            box-shadow: 0 0 8px #00aaff;
        }

        /* ===== å®Œå…¨ç§»é™¤å…Œæ›ä»£å¹£å€åŸŸçš„æ‰€æœ‰æ»¾å‹•æ¢ ===== */
        #exchangeContent,
        #exchangeContent *,
        #exchangeContent .uniform-content,
        #exchangeContent .uniform-content *,
        #exchangeContent .detail-table,
        #exchangeContent .detail-table tbody,
        #exchangeContent .detail-table tr,
        #exchangeContent .detail-table td,
        #exchangeDetailBody,
        #exchangeDetailBody * {
            overflow: visible !important;
            overflow-y: visible !important;
            overflow-x: visible !important;
            max-height: none !important;
        }
        
        /* ç¢ºä¿è¡¨æ ¼ä¸æœƒå› ç‚ºå…§å®¹éé•·è€Œç”¢ç”Ÿæ»¾å‹•æ¢ */
        #exchangeContent .bg-\\[\\#002b4a\\] {
            overflow: visible !important;
        }

        /* ===== ç§»é™¤è¼¸å…¥æ•¸å­—çš„æ»¾é‚Šæ¢ ===== */
        .number-input::-webkit-outer-spin-button,
        .number-input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        .number-input[type=number] {
            -moz-appearance: textfield;
            appearance: textfield;
        }
        .number-input {
            overflow: hidden !important;
            resize: none !important;
        }
        .input-panel,
        .input-panel * {
            overflow: visible !important;
        }
        .number-input::-webkit-scrollbar {
            display: none !important;
            width: 0 !important;
            height: 0 !important;
            background: transparent !important;
        }
        .number-input {
            -ms-overflow-style: none !important;
            scrollbar-width: none !important;
        }

        /* ===== äº¤æ˜“æ˜ç´°è¡¨æ ¼æ¨£å¼ ===== */
        .transaction-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.85rem;
            margin-top: 10px;
        }
        .transaction-table th {
            text-align: left;
            padding: 10px 5px;
            color: #80e4ff;
            font-weight: 500;
            border-bottom: 2px solid #0099ff60;
        }
        .transaction-table td {
            padding: 8px 5px;
            border-bottom: 1px solid #1f4a7a;
        }
        .transaction-table tr:hover {
            background: rgba(0, 153, 255, 0.1);
        }
        .type-badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 20px;
            font-size: 0.7rem;
            font-weight: 600;
        }
        .type-badge.in {
            background: #00a86b20;
            border: 1px solid #00cc88;
            color: #a0ffc0;
        }
        .type-badge.out {
            background: #cc555020;
            border: 1px solid #ff6666;
            color: #ffb0b0;
        }
        .total-amount {
            font-weight: 600;
            color: #ffd966;
        }

        /* ===== æ³¨å–®è¨˜éŒ„è¡¨æ ¼æ¨£å¼ ===== */
        .bet-container {
            width: 100%;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            margin-top: 10px;
            border-radius: 12px;
        }
        
        .bet-table {
            min-width: 700px;
            width: 100%;
            border-collapse: collapse;
            font-size: 0.85rem;
        }
        .bet-table th {
            text-align: left;
            padding: 12px 10px;
            color: #80e4ff;
            font-weight: 500;
            border-bottom: 2px solid #0099ff60;
            white-space: nowrap;
        }
        .bet-table td {
            padding: 12px 10px;
            border-bottom: 1px solid #1f4a7a;
            white-space: nowrap;
        }
        .bet-table tr:hover {
            background: rgba(0, 153, 255, 0.1);
        }
        .bet-id {
            font-size: 0.9rem;
            font-weight: 600;
            color: #ffd966;
            cursor: pointer;
            transition: 0.2s;
            padding: 4px 8px;
            border-radius: 20px;
            background: rgba(0, 153, 255, 0.1);
            display: inline-block;
        }
        .bet-id:hover {
            background: #0066cc;
            color: white;
            transform: scale(1.05);
        }
        .bet-machine {
            background: rgba(0, 153, 255, 0.15);
            padding: 4px 12px;
            border-radius: 30px;
            font-size: 0.85rem;
            color: #ffd966;
            display: inline-block;
        }
        .video-badge {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 4px 10px;
            border-radius: 30px;
            font-size: 0.7rem;
            color: white;
            cursor: pointer;
            transition: 0.2s;
            border: 1px solid rgba(255, 255, 255, 0.3);
            margin-left: 8px;
        }
        .video-badge:hover {
            transform: scale(1.05);
            box-shadow: 0 0 15px currentColor;
        }
        .video-badge.bb {
            background: linear-gradient(135deg, #667eea, #764ba2);
        }
        .video-badge.rb {
            background: linear-gradient(135deg, #f093fb, #f5576c);
        }
        .video-badge i {
            font-size: 0.7rem;
        }
        .prize-positive {
            color: #88ff88;
            font-weight: 600;
            font-size: 1rem;
        }
        .prize-negative {
            color: #ff8888;
            font-weight: 600;
            font-size: 1rem;
        }

        /* ===== æœå°‹æ¡†æ¨£å¼ ===== */
        .search-box {
            background: rgba(0, 40, 70, 0.8);
            border: 1px solid #0099ff60;
            border-radius: 40px;
            padding: 0.5rem 1rem;
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            transition: 0.2s;
        }
        .search-box:focus-within {
            border-color: #ffaa33;
            box-shadow: 0 0 10px #ffaa33;
        }
        .search-box input {
            background: transparent;
            border: none;
            color: white;
            font-size: 0.9rem;
            width: 100%;
            outline: none;
        }
        .search-box input::placeholder {
            color: #7e9bb5;
        }
        .search-box i {
            color: #0099ff;
            font-size: 1rem;
        }
        .search-box button {
            background: #0066cc;
            border: none;
            border-radius: 30px;
            padding: 0.2rem 1rem;
            color: white;
            font-size: 0.8rem;
            cursor: pointer;
            transition: 0.2s;
        }
        .search-box button:hover {
            background: #0099ff;
            transform: scale(1.05);
        }

        /* ===== æ³¨å–®å½ˆçª—æ¨£å¼ ===== */
        .bet-detail-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90%;
            max-width: 350px;
            background: linear-gradient(165deg, #001a33 0%, #000a1a 100%);
            border: 2px solid #0099ff;
            border-radius: 20px;
            padding: 1.5rem;
            z-index: 20000;
            display: none;
            box-shadow: 0 0 30px #0099ff;
        }
        .bet-detail-modal.open {
            display: block;
        }
        .bet-detail-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            border-bottom: 1px solid #0099ff60;
            padding-bottom: 0.8rem;
        }
        .bet-detail-title {
            color: #ffd966;
            font-size: 1.1rem;
            font-weight: bold;
        }
        .bet-detail-close {
            color: #ff6666;
            font-size: 1.5rem;
            cursor: pointer;
            transition: 0.2s;
        }
        .bet-detail-close:hover {
            transform: scale(1.2);
            color: #ff0000;
        }
        .bet-list {
            max-height: 400px;
            overflow-y: auto;
            padding-right: 5px;
        }
        .bet-list-item {
            background: rgba(0, 30, 60, 0.8);
            border: 1px solid #0099ff40;
            border-radius: 12px;
            padding: 0.8rem;
            margin-bottom: 0.8rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .bet-list-item:last-child {
            margin-bottom: 0;
        }
        .bet-list-item .bet-number {
            color: #aad0ff;
            font-size: 0.9rem;
            font-weight: 600;
        }
        .bet-list-item .bet-video {
            display: flex;
            gap: 5px;
        }
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            z-index: 19999;
            display: none;
        }
        .modal-overlay.open {
            display: block;
        }

        /* ===== ç¢ºèªå°è©±æ¡†è‡ªå®šç¾©æ¨£å¼ ===== */
        .confirm-dialog {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 280px;
            background: linear-gradient(165deg, #001a33 0%, #000a1a 100%);
            border: 2px solid #ffaa33;
            border-radius: 20px;
            padding: 1.5rem;
            z-index: 21000;
            display: none;
            box-shadow: 0 0 30px #ffaa33;
            text-align: center;
        }
        .confirm-dialog.open {
            display: block;
        }
        .confirm-dialog .icon {
            font-size: 3rem;
            color: #ffaa33;
            margin-bottom: 1rem;
        }
        .confirm-dialog .title {
            color: white;
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }
        .confirm-dialog .message {
            color: #b0d4ff;
            font-size: 0.9rem;
            margin-bottom: 1.5rem;
        }
        .confirm-dialog .buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
        }
        .confirm-dialog .btn {
            padding: 0.5rem 1.5rem;
            border-radius: 30px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: 0.2s;
            border: none;
        }
        .confirm-dialog .btn.confirm {
            background: #ffaa33;
            color: #000;
        }
        .confirm-dialog .btn.confirm:hover {
            background: #ffbb55;
            transform: scale(1.05);
        }
        .confirm-dialog .btn.cancel {
            background: #3a5a7a;
            color: white;
        }
        .confirm-dialog .btn.cancel:hover {
            background: #4a6a8a;
            transform: scale(1.05);
        }
        .confirm-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            z-index: 20999;
            display: none;
        }
        .confirm-overlay.open {
            display: block;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-gray-900 to-blue-950 text-white">
    <!-- ç¯©é¸å´æ‹‰æ¬„ -->
    <div id="drawerOverlay" class="drawer-overlay"></div>
    <div id="filterDrawer" class="filter-drawer scrollbar-beauty">
        <div class="flex justify-between items-center mb-6">
            <h3 class="text-primary text-lg font-bold flex items-center gap-2"><i class="fa fa-sliders text-secondary"></i> é€²éšç¯©é¸</h3>
            <button id="closeDrawer" class="text-gray-400 hover:text-primary text-2xl"><i class="fa fa-times-circle"></i></button>
        </div>
    </div>

    <!-- æ³¨å–®æ˜ç´°å½ˆçª— -->
    <div id="modalOverlay" class="modal-overlay"></div>
    <div id="betDetailModal" class="bet-detail-modal">
        <div class="bet-detail-header">
            <span class="bet-detail-title" id="modalMachineName">ç”²è³€å¿æ³•å¸–</span>
            <span class="bet-detail-close" id="closeModalBtn">&times;</span>
        </div>
        <div class="bet-list" id="betDetailList">
            <!-- å‹•æ…‹ç”Ÿæˆæ³¨å–®åˆ—è¡¨ -->
        </div>
    </div>

    <!-- è‡ªå®šç¾©ç¢ºèªå°è©±æ¡† -->
    <div id="confirmOverlay" class="confirm-overlay"></div>
    <div id="confirmDialog" class="confirm-dialog">
        <div class="icon" id="confirmIcon">â“</div>
        <div class="title" id="confirmTitle">ç¢ºèª</div>
        <div class="message" id="confirmMessage">ç¢ºå®šè¦åŸ·è¡Œæ­¤æ“ä½œå—ï¼Ÿ</div>
        <div class="buttons">
            <button class="btn cancel" id="confirmCancel">å–æ¶ˆ</button>
            <button class="btn confirm" id="confirmOk">ç¢ºå®š</button>
        </div>
    </div>

    <!-- ä¸»å…§å®¹ -->
    <div class="max-w-md mx-auto tech-gradient min-h-screen flex flex-col">

        <!-- ========= é ‚éƒ¨å°èˆª ========= -->
        <header class="px-4 py-3 bg-dark-200/90 tech-border">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <div class="avatar-container" id="avatarContainer">
                        <img id="avatarImage" src="https://i.pravatar.cc/150?img=7" alt="user avatar">
                        <div class="avatar-overlay">æ›´æ›</div>
                    </div>
                    <div class="flex flex-col">
                        <div class="flex items-center gap-1" id="nicknameEditBlock">
                            <span id="displayNickname" class="nickname-edit text-white text-xl font-bold">å¤«äººæœƒç”Ÿæ°£</span>
                            <i class="fa fa-pencil-square-o text-blue-400 text-sm ml-1"></i>
                        </div>
                        <div class="flex items-center gap-2 mt-1">
                            <span class="vip-badge" id="vipBadge">VIP 3</span>
                            <span class="exp-text" id="expText">ç¶“é©—å€¼ 2,480/3,600</span>
                        </div>
                        <!-- å‰©é¤˜é»æ•¸é¡¯ç¤º -->
                        <div class="flex items-center gap-2 mt-1 text-amber-400 text-sm">
                            å‰©é¤˜é»æ•¸ <span id="headerPoints" class="font-bold text-amber-300">5,520</span>
                        </div>
                    </div>
                </div>
                <a href="#" id="exitToHomeBtn" class="home-return-btn" title="å›åˆ°é¦–é "><i class="fa fa-home"></i></a>
            </div>
            <div class="mt-2 pl-16 pr-2">
                <div class="progress-bar"><div class="progress-fill"></div></div>
            </div>
        </header>

        <!-- VIP è³‡è¨Šå±¤ -->
        <div id="vipInfoPanel" class="vip-info-panel mx-4 mt-2">
            <h3 class="text-amber-400 font-bold text-sm mb-2"><i class="fa fa-crown"></i> VIP ç‰¹æ¬Šèªªæ˜</h3>
            <div class="vip-tier"><span class="level">VIP 1</span><span class="benefit">æ¯æ—¥ç´…åˆ© +50</span></div>
            <div class="vip-tier"><span class="level">VIP 2</span><span class="benefit">ä¿ç•™æ©Ÿå° +2 å°</span></div>
            <div class="vip-tier"><span class="level">VIP 3 (ç•¶å‰)</span><span class="benefit">è¿”æ°´ 0.5% + å°ˆå±¬å®¢æœ</span></div>
            <div class="vip-tier"><span class="level">VIP 4</span><span class="benefit">ç”Ÿæ—¥ç¦®é‡‘ 1000</span></div>
            <div class="vip-tier"><span class="level">VIP 5</span><span class="benefit">æé ˜æ‰‹çºŒè²»å…¨å…</span></div>
        </div>

        <!-- ä¸‰å¤§åŠŸèƒ½æŒ‰éˆ•å€ -->
        <div class="px-4 mt-4">
            <div class="banner-area grid grid-cols-3 gap-2 items-center">
                <div class="action-grid-btn" id="favMachinesBtn">
                    <span class="count-badge" id="favCount">3</span>
                    <i class="fa fa-heart" style="color: #ff6680;"></i>
                    <span class="text-xs block mt-1">æˆ‘æ”¶è—çš„æ©Ÿå°</span>
                </div>
                <div class="action-grid-btn" id="keepMachinesBtn">
                    <span class="count-badge keep" id="keepCount">2</span>
                    <i class="fa fa-bookmark" style="color: #ffb347;"></i>
                    <span class="text-xs block mt-1">æˆ‘ä¿ç•™çš„æ©Ÿå°</span>
                </div>
                <div class="action-grid-btn" id="supportBtn">
                    <i class="fa fa-headphones" style="color: #7ec8ff;"></i>
                    <span class="text-xs block mt-1">å®¢æœèˆ‡å¹«åŠ©</span>
                </div>
            </div>
        </div>

        <!-- æ”¶è—æ©Ÿå°åˆ—è¡¨å®¹å™¨ -->
        <div id="favMachineList" class="machine-list-container px-4">
            <div class="list-title"><i class="fa fa-heart text-pink-400"></i> æˆ‘æ”¶è—çš„æ©Ÿå° (<span id="favCountDisplay">3</span>)</div>
            <div class="machine-list scrollbar-beauty" id="favMachineItems"></div>
        </div>

        <!-- ä¿ç•™æ©Ÿå°åˆ—è¡¨å®¹å™¨ -->
        <div id="keepMachineList" class="machine-list-container px-4">
            <div class="list-title"><i class="fa fa-bookmark text-amber-400"></i> æˆ‘ä¿ç•™çš„æ©Ÿå° (<span id="keepCountDisplay">2</span>)</div>
            <div class="machine-list scrollbar-beauty" id="keepMachineItems"></div>
        </div>

        <!-- è·‘é¦¬ç‡ˆå·²ç§»é™¤ -->

        <!-- æ¨™ç±¤æ¬„ -->
        <div class="px-4 py-3">
            <div class="flex gap-2" id="profileTabContainer">
                <button class="profile-tab active" data-tab="settings">âš™ï¸ è¨­å®š</button>
                <button class="profile-tab" data-tab="token">ğŸ’° ä»£å¹£</button>
                <button class="profile-tab" data-tab="betHistory">ğŸ“‹ æ³¨å–®ç´€éŒ„</button>
            </div>
        </div>

        <!-- å‹•æ…‹å…§å®¹å€åŸŸ -->
        <main class="flex-1 px-4 pb-4 overflow-y-auto scrollbar-beauty" id="profileContentArea">
            <!-- è¨­å®šé¢æ¿ -->
            <div id="settingsPanel" class="tab-panel">
                <div class="game-card-bg tech-border rounded-xl p-4 space-y-4">
                    <h3 class="text-primary text-md border-b border-primary/20 pb-2"><i class="fa fa-cog mr-2"></i>åå¥½è¨­å®š</h3>
                    <div>
                        <div class="text-sm text-gray-300 mb-2">èªè¨€ / Language</div>
                        <select id="languageSelect" class="lang-select">
                            <option value="zh-hant" selected>ç¹é«”ä¸­æ–‡</option>
                            <option value="zh-hans">ç°¡é«”ä¸­æ–‡</option>
                            <option value="ja">æ—¥æœ¬èª</option>
                            <option value="ko">í•œêµ­ì–´</option>
                            <option value="en">English</option>
                        </select>
                    </div>
                    <div class="flex items-center justify-between">
                        <span class="text-sm text-gray-300">æ¥æ”¶é€šçŸ¥</span>
                        <div class="w-12 h-6 bg-blue-800 rounded-full flex items-center p-1 border border-blue-400">
                            <div class="w-4 h-4 bg-blue-300 rounded-full ml-auto shadow"></div>
                        </div>
                    </div>
                    <div class="flex items-center justify-between">
                        <span class="text-sm text-gray-300">æš—è‰²æ¨¡å¼</span>
                        <div id="themeToggle" class="theme-switch"><div class="thumb"></div></div>
                    </div>
                    <div class="flex items-center justify-between">
                        <span class="text-sm text-gray-300">å¸³è™Ÿç¶å®š</span>
                        <span class="text-xs text-green-400">å·²ç¶å®šæ‰‹æ©Ÿ</span>
                    </div>
                </div>
            </div>

            <!-- ä»£å¹£é¢æ¿ - é›™å‘å¸¶å…¥/å¸¶å‡º + æ©Ÿå°åˆ—è¡¨ + äº¤æ˜“æ˜ç´° -->
            <div id="tokenPanel" class="tab-panel hidden">
                <div class="game-card-bg tech-border rounded-xl p-3">
                    <!-- å­æ¨™ç±¤ -->
                    <div class="flex gap-2 mb-3 border-b border-blue-900 pb-2">
                        <span class="sub-tab active" id="tokenExchangeSub">å…Œæ›</span>
                        <span class="sub-tab" id="tokenPlatformSub">ä»£å¹£å¸¶å‡ºå¸¶å…¥</span>
                    </div>

                    <!-- å…Œæ›å…§å®¹ -->
                    <div id="exchangeContent">
                        <!-- å‰©é¤˜é»æ•¸é¡¯ç¤º -->
                        <div class="remain-badge">
                            <span class="text-blue-300">å‰©é¤˜é»æ•¸ï¼š</span>
                            <span class="text-amber-400 font-bold text-2xl" id="remainingPointsDisplay">5,520</span>
                        </div>
                        
                        <!-- æ©Ÿå°åˆ—è¡¨ -->
                        <div class="mt-3">
                            <div class="text-sm text-blue-400 mb-2"><i class="fa fa-gamepad mr-1"></i>æˆ‘çš„æ©Ÿå°</div>
                            <div class="machine-grid" id="machineGrid">
                                <!-- ç”± JavaScript å‹•æ…‹ç”¢ç”Ÿ -->
                            </div>
                        </div>

                        <!-- ç•¶å‰é¸ä¸­çš„æ©Ÿå° -->
                        <div id="selectedMachineInfo" class="bg-[#003355] rounded-xl p-3 mb-3 text-sm">
                            <div class="flex justify-between items-center">
                                <span class="text-blue-300">ç•¶å‰é¸æ“‡ï¼š</span>
                                <span class="text-amber-400 font-bold" id="selectedMachineName">è«‹é¸æ“‡æ©Ÿå°</span>
                            </div>
                            <div class="flex justify-between items-center mt-1">
                                <span class="text-blue-300">æ©Ÿå°å…§é»æ•¸ï¼š</span>
                                <span class="text-cyan-400 font-bold" id="selectedMachinePoints">0</span>
                            </div>
                        </div>

                        <!-- é›™å‘è¼¸å…¥æ¡† - å·²ç§»é™¤æ»¾å‹•æ¢ -->
                        <div class="input-panel">
                            <input type="number" id="pointInput" class="number-input" value="1000" min="0" step="100" placeholder="è¼¸å…¥é»æ•¸">
                            <div class="input-buttons mb-2">
                                <button class="action-btn max" id="maxBtn">æœ€å¤§å€¼</button>
                            </div>
                            <div class="flex gap-2">
                                <button class="action-btn in flex-1" id="bringInBtn">
                                    <i class="fa fa-arrow-down mr-1"></i> å¸¶å…¥æ©Ÿå°
                                </button>
                                <button class="action-btn out flex-1" id="bringOutBtn">
                                    <i class="fa fa-arrow-up mr-1"></i> å¸¶å‡ºæ©Ÿå°
                                </button>
                            </div>
                        </div>

                        <!-- å„²å€¼æ˜ç´°å€ -->
                        <div class="mt-4 pt-2 border-t border-blue-800">
                            <div class="text-xs text-blue-400 mb-2"><i class="fa fa-history mr-1"></i>å„²å€¼æ˜ç´°</div>
                            <div class="uniform-section">
                                <div class="uniform-header" id="toggleRecharge">
                                    <div class="uniform-header-left"><i class="fa fa-credit-card text-green-400"></i><span class="uniform-title">å„²å€¼</span></div>
                                    <div style="display: flex; align-items: center; gap: 10px;"><span class="uniform-value" id="rechargeAmount">3,000</span><i class="fa fa-chevron-down chevron"></i></div>
                                </div>
                                <div class="uniform-content" id="rechargeDetails">
                                    <div class="source-detail-item">
                                        <span class="source-detail-date">2025-02-15 14:30</span>
                                        <span class="source-detail-amount text-green-400">+1,000</span>
                                    </div>
                                    <div class="source-detail-item">
                                        <span class="source-detail-date">2025-02-10 09:20</span>
                                        <span class="source-detail-amount text-green-400">+2,000</span>
                                    </div>
                                    <div class="source-detail-item" onclick="alert('æ›´å¤šå„²å€¼è¨˜éŒ„...')" style="cursor: pointer; color: #66ccff; justify-content: center;">
                                        <span>æŸ¥çœ‹å®Œæ•´è¨˜éŒ„ <i class="fa fa-arrow-right ml-1"></i></span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- å¹³å°è´ˆé€é»æ•¸ -->
                            <div class="text-xs text-blue-400 mb-2 mt-3"><i class="fa fa-gift mr-1"></i>å¹³å°è´ˆé€é»æ•¸</div>
                            <div class="bg-[#002b4a] rounded-xl p-3 mb-3 tech-border">
                                <table class="detail-table">
                                    <thead>
                                        <tr>
                                            <th>æ™‚é–“</th>
                                            <th>é¡åˆ¥</th>
                                            <th>é»æ•¸</th>
                                            <th>åˆè¨ˆ</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>2025-02-18 10:15</td>
                                            <td><span class="category-badge in">è¨»å†Šç¦®</span></td>
                                            <td class="text-green-400">+500</td>
                                            <td class="text-amber-400">500</td>
                                        </tr>
                                        <tr>
                                            <td>2025-02-20 16:40</td>
                                            <td><span class="category-badge in">å„²å€¼å›é¥‹</span></td>
                                            <td class="text-green-400">+1,000</td>
                                            <td class="text-amber-400">1,500</td>
                                        </tr>
                                        <tr>
                                            <td>2025-02-25 09:30</td>
                                            <td><span class="category-badge in">æ¯æ—¥ç´…åˆ©</span></td>
                                            <td class="text-green-400">+500</td>
                                            <td class="text-amber-400">2,000</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- ä»£å¹£å¸¶å‡ºå¸¶å…¥å…§å®¹ -->
                    <div id="platformContent" class="hidden">
                        <h3 class="text-primary text-md"><i class="fa fa-exchange mr-2"></i>ä»£å¹£å¸¶å‡º/å¸¶å…¥</h3>
                        <div class="current-balance"><span>ğŸ’° ç•¶å‰èº«ä¸Šé»æ•¸</span><span class="balance-number" id="currentTokenBalance">5,520</span></div>
                        <div class="formula-box"><div class="formula-highlight" id="formulaHighlight">ç¸½ç²å¾— 6,740 + (å¸¶å‡º+ 2,000) - (å¸¶å…¥- 780) = 5,520</div></div>
                        <div class="filter-row">
                            <input type="date" id="startDateFilter" class="filter-date" value="2025-01-01">
                            <span class="text-blue-300">è‡³</span>
                            <input type="date" id="endDateFilter" class="filter-date" value="2025-04-01">
                            <select id="platformFilter" class="filter-select">
                                <option value="all">å…¨éƒ¨</option>
                                <option value="out">åƒ…å¸¶å‡º (+)</option>
                                <option value="in">åƒ…å¸¶å…¥ (-)</option>
                            </select>
                        </div>
                        
                        <!-- äº¤æ˜“æ˜ç´°åˆ—è¡¨ -->
                        <div class="records-title"><i class="fa fa-list-ul mr-2"></i>äº¤æ˜“æ˜ç´°åˆ—è¡¨</div>
                        <div id="transactionList" class="mt-1"></div>
                        <div id="platformPagination" class="pagination mt-3"></div>
                    </div>
                </div>
            </div>

            <!-- æ³¨å–®ç´€éŒ„é¢æ¿ - å¯å·¦å³æ»‘å‹•ï¼Œå½±ç‰‡åœ¨çé …æ—é‚Š -->
            <div id="betHistoryPanel" class="tab-panel hidden">
                <div class="game-card-bg tech-border rounded-xl p-3">
                    <h3 class="text-primary text-md mb-3"><i class="fa fa-list-alt mr-2"></i>æ³¨å–®è¨˜éŒ„</h3>
                    
                    <!-- é—œéµå­—æœå°‹æ¡† -->
                    <div class="search-box">
                        <i class="fa fa-search"></i>
                        <input type="text" id="betSearchInput" placeholder="æœå°‹æ³¨å–®ç·¨è™Ÿæˆ–æ©Ÿå°åç¨±...">
                        <button id="betSearchBtn">æœå°‹</button>
                    </div>
                    
                    <!-- æ³¨å–®è¨˜éŒ„åˆ—è¡¨ - å¯å·¦å³æ»‘å‹• -->
                    <div class="records-title"><i class="fa fa-ticket mr-2"></i>æ³¨å–®è¨˜éŒ„åˆ—è¡¨</div>
                    <div class="bet-container scrollbar-beauty-x" id="betContainer">
                        <table class="bet-table" id="betTable">
                            <thead>
                                <tr>
                                    <th>æ™‚é–“</th>
                                    <th>æ©Ÿå°åç¨±</th>
                                    <th>çé …</th>
                                    <th>æ³¨å–®æ˜ç´°(å½±ç‰‡)</th>
                                </tr>
                            </thead>
                            <tbody id="betListBody">
                                <!-- ç”± JavaScript å‹•æ…‹ç”¢ç”Ÿ -->
                            </tbody>
                        </table>
                    </div>
                    <div id="betPagination" class="pagination mt-3"></div>
                </div>
            </div>
        </main>

        <!-- åº•éƒ¨å°èˆª - ä¿®æ­£ã€Œæˆ‘çš„ã€äº®ç‡ˆ -->
        <nav class="bottom-nav mx-auto">
            <div class="flex justify-between items-center">
                <a href="#" class="nav-item" id="nav-home" data-page="home"><i class="fa fa-home text-xl"></i><span class="text-xs mt-1">é¦–é </span></a>
                <a href="#" class="nav-item" id="nav-game" data-page="game"><i class="fa fa-gamepad text-xl"></i><span class="text-xs mt-1">æ©Ÿå°</span></a>
                <a href="#" class="nav-item" id="nav-bell" data-page="bell"><i class="fa fa-bell text-xl"></i><span class="text-xs mt-1">å…¬å‘Š</span><span class="nav-badge" id="newsBadge"></span></a>
                <a href="#" class="nav-item" id="nav-user" data-page="user"><i class="fa fa-user text-xl"></i><span class="text-xs mt-1">æˆ‘çš„</span></a>
            </div>
        </nav>
    </div>

    <script>
        (function() {
            // ========== æ ¸å¿ƒæ•¸æ“š ==========
            const RECHARGE = 3000;
            const BONUS = 2000;
            const GAME_ACTUAL = 1740;
            
            // äº¤æ˜“æ•¸æ“š
            const transactions = [
                { date: '2025-02-17 09:05', machine: 'ç”²è³€å¿æ³•å¸–', impact: -200, type: 'out' },
                { date: '2025-02-17 10:05', machine: 'ç”²è³€å¿æ³•å¸–', impact: 300, type: 'in' },
                { date: '2025-02-20 13:45', machine: 'ç”²è³€å¿æ³•å¸–', impact: 80, type: 'in' },
                { date: '2025-03-01 14:20', machine: 'ç”²è³€å¿æ³•å¸–', impact: 50, type: 'in' },
                { date: '2025-02-19 09:20', machine: 'è¶…ç´šå¥‡è¹Ÿå°ä¸‘', impact: -500, type: 'out' },
                { date: '2025-02-18 22:10', machine: 'è¶…ç´šå¥‡è¹Ÿå°ä¸‘', impact: 150, type: 'in' },
                { date: '2025-03-05 14:10', machine: 'è¶…ç´šå¥‡è¹Ÿå°ä¸‘', impact: 600, type: 'in' },
                { date: '2025-03-04 09:20', machine: 'å‰å®—', impact: -80, type: 'out' },
                { date: '2025-01-25 11:30', machine: 'å‰å®—', impact: -300, type: 'out' },
                { date: '2025-02-15 20:15', machine: 'å‰å®—', impact: 200, type: 'in' },
                { date: '2025-02-16 14:30', machine: 'èŠ±æœˆ', impact: -1000, type: 'out' },
                { date: '2025-03-03 15:45', machine: 'èŠ±æœˆ', impact: 400, type: 'in' },
                { date: '2025-03-02 10:30', machine: 'æ–°ç”²è³€', impact: -150, type: 'out' },
                { date: '2025-03-02 11:20', machine: 'æ–°ç”²è³€', impact: 500, type: 'in' }
            ];
            
            const totalOut = transactions.filter(t => t.type === 'out').reduce((sum, t) => sum + Math.abs(t.impact), 0);
            const totalIn = transactions.filter(t => t.type === 'in').reduce((sum, t) => sum + t.impact, 0);
            const netImpact = transactions.reduce((sum, t) => sum + t.impact, 0);
            
            const TOTAL_COIN_ACTUAL = RECHARGE + BONUS + GAME_ACTUAL; // 6740
            let currentPoints = TOTAL_COIN_ACTUAL + netImpact; // 5520

            // ========== æ©Ÿå°æ•¸æ“š ==========
            let machines = [
                { id: 1, name: 'ç”²è³€å¿æ³•å¸–', points: 1200, icon: 'ğŸ®' },
                { id: 2, name: 'è¶…ç´šå¥‡è¹Ÿå°ä¸‘', points: 800, icon: 'ğŸ°' },
                { id: 3, name: 'å‰å®—', points: 2500, icon: 'ğŸ¯' },
                { id: 4, name: 'èŠ±æœˆ', points: 600, icon: 'ğŸ²' },
                { id: 5, name: 'æ–°ç”²è³€', points: 900, icon: 'ğŸ¯' }
            ];
            
            let selectedMachine = null;

            // ========== æ³¨å–®æ•¸æ“š ==========
            function generateBetRecords() {
                const machines = ['ç”²è³€å¿æ³•å¸–', 'è¶…ç´šå¥‡è¹Ÿå°ä¸‘', 'å‰å®—', 'èŠ±æœˆ', 'æ–°ç”²è³€'];
                const dates = ['2025-03-15', '2025-03-14', '2025-03-13', '2025-03-12', '2025-03-11', '2025-03-10'];
                const hours = ['10:30', '11:45', '14:20', '15:10', '16:30', '18:20', '19:45', '20:30', '21:15', '22:40'];
                const videoTypes = ['BB', 'RB'];
                const prizes = ['+2,500', '+1,200', '+3,800', '+1,800', '+2,200', '+3,000', '+1,600', '+900', '+2,800', '-500', '-300', '-200', '-150', '-400', '-100'];
                
                let records = [];
                let idCounter = 1;
                
                machines.forEach(machine => {
                    for (let i = 0; i < 20; i++) {
                        const randomDate = dates[Math.floor(Math.random() * dates.length)];
                        const randomHour = hours[Math.floor(Math.random() * hours.length)];
                        const randomVideo = videoTypes[Math.floor(Math.random() * videoTypes.length)];
                        const randomPrize = prizes[Math.floor(Math.random() * prizes.length)];
                        
                        const dateNum = randomDate.replace(/-/g, '');
                        const betNumber = String(idCounter).padStart(3, '0');
                        const betId = `BB${dateNum}-${betNumber}`;
                        
                        records.push({
                            date: `${randomDate} ${randomHour}`,
                            machine: machine,
                            betId: betId,
                            prize: randomPrize,
                            videoType: randomVideo,
                            videoUrl: '#'
                        });
                        
                        idCounter++;
                        if (idCounter > 99) idCounter = 1;
                    }
                });
                
                return records.sort((a, b) => new Date(b.date) - new Date(a.date));
            }
            
            const betRecords = generateBetRecords();

            // ========== æ”¶è—/ä¿ç•™æ©Ÿå°è³‡æ–™ ==========
            let favoriteMachines = [
                { id: 1, name: 'ç”²è³€å¿æ³•å¸– å¼', image: 'https://static.wixstatic.com/media/d5e540_e7da9c3f1fb24a2aa9ef8d180a2cf6fa~mv2.png', ratio: '1:2', vendor: 'Sammy' },
                { id: 2, name: 'è¶…ç´šå¥‡è¹Ÿå°ä¸‘', image: 'https://static.wixstatic.com/media/d5e540_1c6cd7d36cc24e47a6b359a1abeb3923~mv2.png', ratio: '1:1', vendor: 'Olympia' },
                { id: 3, name: 'å‰å®—', image: 'https://static.wixstatic.com/media/d5e540_0926089e3da443eebe6bc2ede58f5788~mv2.png', ratio: '1:2', vendor: 'Daito' }
            ];
            
            let keepMachines = [
                { 
                    id: 4, 
                    name: 'èŠ±æœˆ', 
                    image: 'https://static.wixstatic.com/media/d5e540_0926089e3da443eebe6bc2ede58f5788~mv2.png', 
                    ratio: '1:4', 
                    vendor: 'Olympia',
                    endTime: new Date(Date.now() + 2 * 24 * 60 * 60 * 1000)
                },
                { 
                    id: 5, 
                    name: 'æ–°ç”²è³€', 
                    image: 'https://static.wixstatic.com/media/d5e540_e7da9c3f1fb24a2aa9ef8d180a2cf6fa~mv2.png', 
                    ratio: '1:4', 
                    vendor: 'Sammy',
                    endTime: new Date(Date.now() + 5 * 60 * 60 * 1000)
                }
            ];

            // ========== DOM å…ƒç´  ==========
            const favBtn = document.getElementById('favMachinesBtn');
            const keepBtn = document.getElementById('keepMachinesBtn');
            const favList = document.getElementById('favMachineList');
            const keepList = document.getElementById('keepMachineList');
            const favItems = document.getElementById('favMachineItems');
            const keepItems = document.getElementById('keepMachineItems');
            const favCount = document.getElementById('favCount');
            const keepCount = document.getElementById('keepCount');
            const favCountDisplay = document.getElementById('favCountDisplay');
            const keepCountDisplay = document.getElementById('keepCountDisplay');
            const machineGrid = document.getElementById('machineGrid');
            const selectedMachineName = document.getElementById('selectedMachineName');
            const selectedMachinePoints = document.getElementById('selectedMachinePoints');
            const transactionList = document.getElementById('transactionList');
            const betListBody = document.getElementById('betListBody');
            const betPagination = document.getElementById('betPagination');
            const betSearchInput = document.getElementById('betSearchInput');
            const betSearchBtn = document.getElementById('betSearchBtn');
            const betDetailModal = document.getElementById('betDetailModal');
            const modalOverlay = document.getElementById('modalOverlay');
            const closeModalBtn = document.getElementById('closeModalBtn');
            const modalMachineName = document.getElementById('modalMachineName');
            const betDetailList = document.getElementById('betDetailList');
            
            // ç¢ºèªå°è©±æ¡†å…ƒç´ 
            const confirmDialog = document.getElementById('confirmDialog');
            const confirmOverlay = document.getElementById('confirmOverlay');
            const confirmTitle = document.getElementById('confirmTitle');
            const confirmMessage = document.getElementById('confirmMessage');
            const confirmIcon = document.getElementById('confirmIcon');
            const confirmCancel = document.getElementById('confirmCancel');
            const confirmOk = document.getElementById('confirmOk');
            
            let pendingAction = null;

            // ========== è‡ªå®šç¾©ç¢ºèªå°è©±æ¡†å‡½æ•¸ ==========
            function showConfirm(options) {
                confirmTitle.textContent = options.title || 'ç¢ºèª';
                confirmMessage.textContent = options.message || 'ç¢ºå®šè¦åŸ·è¡Œæ­¤æ“ä½œå—ï¼Ÿ';
                confirmIcon.textContent = options.icon || 'â“';
                confirmIcon.style.color = options.iconColor || '#ffaa33';
                pendingAction = options.onConfirm;
                
                confirmDialog.classList.add('open');
                confirmOverlay.classList.add('open');
            }

            function hideConfirm() {
                confirmDialog.classList.remove('open');
                confirmOverlay.classList.remove('open');
                pendingAction = null;
            }

            confirmCancel.addEventListener('click', hideConfirm);
            confirmOk.addEventListener('click', function() {
                if (pendingAction) {
                    pendingAction();
                }
                hideConfirm();
            });

            confirmOverlay.addEventListener('click', hideConfirm);

            // ========== ç§»é™¤æ”¶è—ï¼ˆå–æ¶ˆæ”¶è—ï¼‰ ==========
            window.unfavoriteMachine = function(id, name) {
                showConfirm({
                    title: 'å–æ¶ˆæ”¶è—',
                    message: `ç¢ºå®šè¦å–æ¶ˆæ”¶è—ã€Œ${name}ã€å—ï¼Ÿ`,
                    icon: 'ğŸ’”',
                    iconColor: '#ff6680',
                    onConfirm: function() {
                        favoriteMachines = favoriteMachines.filter(m => m.id !== id);
                        renderFavorites();
                        alert(`âœ… å·²å–æ¶ˆæ”¶è—ã€Œ${name}ã€`);
                    }
                });
            };

            // ========== é›¢é–‹ä¿ç•™ ==========
            window.leaveKeepMachine = function(id, name) {
                showConfirm({
                    title: 'é›¢é–‹ä¿ç•™',
                    message: `ç¢ºå®šè¦é›¢é–‹ä¿ç•™çš„æ©Ÿå°ã€Œ${name}ã€å—ï¼Ÿ`,
                    icon: 'ğŸšª',
                    iconColor: '#ff4d4d',
                    onConfirm: function() {
                        keepMachines = keepMachines.filter(m => m.id !== id);
                        renderKeep();
                        alert(`âœ… å·²é›¢é–‹ä¿ç•™çš„æ©Ÿå°ã€Œ${name}ã€`);
                    }
                });
            };

            // ========== å½ˆçª—å‡½æ•¸ ==========
            window.openBetDetail = function(machineName) {
                const machineBets = betRecords.filter(bet => bet.machine === machineName);
                
                let html = '';
                machineBets.slice(0, 30).forEach(bet => {
                    const videoClass = bet.videoType === 'BB' ? 'video-badge bb' : 'video-badge rb';
                    html += `
                        <div class="bet-list-item">
                            <span class="bet-number">${bet.betId}</span>
                            <div class="bet-video">
                                <span class="${videoClass}" onclick="window.playVideo('${bet.betId}', '${bet.videoType}')">
                                    <i class="fa ${bet.videoType === 'BB' ? 'fa-film' : 'fa-video-camera'}"></i>
                                    ${bet.videoType}
                                </span>
                            </div>
                        </div>
                    `;
                });
                
                if (machineBets.length > 30) {
                    html += `<div class="text-center text-blue-300 mt-2">... é‚„æœ‰ ${machineBets.length - 30} ç­†</div>`;
                }
                
                betDetailList.innerHTML = html;
                modalMachineName.textContent = machineName;
                betDetailModal.classList.add('open');
                modalOverlay.classList.add('open');
            };

            window.playVideo = function(betId, videoType) {
                alert(`ğŸ¬ æ’­æ”¾ ${videoType} å½±ç‰‡\næ³¨å–®è™Ÿ: ${betId}\n(ç¤ºç¯„åŠŸèƒ½)`);
            };

            // é—œé–‰å½ˆçª—
            closeModalBtn.addEventListener('click', () => {
                betDetailModal.classList.remove('open');
                modalOverlay.classList.remove('open');
            });

            modalOverlay.addEventListener('click', () => {
                betDetailModal.classList.remove('open');
                modalOverlay.classList.remove('open');
            });

            // ========== æ¸²æŸ“æ”¶è—æ©Ÿå° ==========
            function renderFavorites() {
                let html = '';
                favoriteMachines.forEach(m => {
                    html += `
                        <div class="machine-card" data-id="${m.id}">
                            <img src="${m.image}" alt="${m.name}">
                            <div class="machine-info">
                                <div class="machine-name">${m.name}</div>
                                <div class="machine-meta"><span>${m.ratio}</span><span>${m.vendor}</span></div>
                            </div>
                            <div class="machine-actions">
                                <div class="play-btn" onclick="window.playGame('${m.name}')"><i class="fa fa-play"></i> é€²å…¥</div>
                                <div class="unfavorite-btn" onclick="window.unfavoriteMachine(${m.id}, '${m.name}')">
                                    <i class="fa fa-heart"></i> å–æ¶ˆæ”¶è—
                                </div>
                            </div>
                        </div>
                    `;
                });
                favItems.innerHTML = html || '<div class="text-gray-400 text-sm p-4 text-center">æš«ç„¡æ”¶è—æ©Ÿå°</div>';
                favCount.textContent = favoriteMachines.length;
                if(favCountDisplay) favCountDisplay.textContent = favoriteMachines.length;
            }

            // ========== æ¸²æŸ“ä¿ç•™æ©Ÿå° ==========
            function renderKeep() {
                let html = '';
                keepMachines.forEach(m => {
                    const endDate = new Date(m.endTime);
                    const endTimeStr = endDate.toLocaleString('zh-TW');
                    
                    html += `
                        <div class="machine-card" data-id="${m.id}">
                            <img src="${m.image}" alt="${m.name}">
                            <div class="machine-info">
                                <div class="machine-name">${m.name}</div>
                                <div class="machine-meta"><span>${m.ratio}</span><span>${m.vendor}</span></div>
                                <div class="countdown-timer" data-endtime="${endDate.toISOString()}"><i class="fa fa-hourglass-half"></i> è¨ˆç®—ä¸­...</div>
                                <div style="font-size: 0.6rem; color: #aaa; margin-top: 2px;">çµæŸæ–¼ ${endTimeStr}</div>
                            </div>
                            <div class="machine-actions">
                                <div class="play-btn" onclick="window.playGame('${m.name}')"><i class="fa fa-play"></i> é€²å…¥</div>
                                <div class="leave-btn" onclick="window.leaveKeepMachine(${m.id}, '${m.name}')">
                                    <i class="fa fa-sign-out"></i> é›¢é–‹
                                </div>
                            </div>
                        </div>
                    `;
                });
                keepItems.innerHTML = html || '<div class="text-gray-400 text-sm p-4 text-center">æš«ç„¡ä¿ç•™æ©Ÿå°</div>';
                keepCount.textContent = keepMachines.length;
                if(keepCountDisplay) keepCountDisplay.textContent = keepMachines.length;
                updateCountdowns();
            }

            // ========== æ¸²æŸ“æ©Ÿå° ==========
            function renderMachines() {
                let html = '';
                machines.forEach(m => {
                    const selectedClass = (selectedMachine && selectedMachine.id === m.id) ? 'selected' : '';
                    html += `
                        <div class="machine-card-item ${selectedClass}" data-id="${m.id}" data-name="${m.name}" data-points="${m.points}">
                            <div class="machine-name-text">${m.icon} ${m.name}</div>
                            <div class="machine-points">${m.points.toLocaleString()}</div>
                            <div class="machine-label">æ©Ÿå°é»æ•¸</div>
                        </div>
                    `;
                });
                machineGrid.innerHTML = html;
                
                document.querySelectorAll('.machine-card-item').forEach(card => {
                    card.addEventListener('click', () => {
                        const id = parseInt(card.dataset.id);
                        const name = card.dataset.name;
                        const points = parseInt(card.dataset.points);
                        selectedMachine = { id, name, points };
                        
                        document.querySelectorAll('.machine-card-item').forEach(c => c.classList.remove('selected'));
                        card.classList.add('selected');
                        
                        selectedMachineName.textContent = name;
                        selectedMachinePoints.textContent = points.toLocaleString();
                    });
                });
            }

            // ========== å€’æ•¸è¨ˆæ™‚ ==========
            function updateCountdowns() {
                document.querySelectorAll('.countdown-timer[data-endtime]').forEach(el => {
                    const endTime = new Date(el.dataset.endtime).getTime();
                    const now = new Date().getTime();
                    const diff = endTime - now;
                    
                    if(diff <= 0) {
                        el.innerHTML = '<i class="fa fa-hourglass-end"></i> å·²åˆ°æœŸ';
                        el.classList.add('warning');
                        return;
                    }
                    
                    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                    const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                    
                    let timeText = '';
                    if(days > 0) timeText = `${days}å¤© ${hours}å°æ™‚`;
                    else if(hours > 0) timeText = `${hours}å°æ™‚ ${minutes}åˆ†`;
                    else timeText = `${minutes}åˆ†`;
                    
                    if(hours === 0 && days === 0) el.classList.add('warning');
                    else el.classList.remove('warning');
                    
                    el.innerHTML = `<i class="fa fa-hourglass-half"></i> å‰©é¤˜ ${timeText}`;
                });
            }

            window.playGame = function(name) {
                alert(`ğŸ® é€²å…¥éŠæˆ²ï¼š${name}\n(ç¤ºç¯„åŠŸèƒ½)`);
            };

            // ========== æŒ‰éˆ•äº‹ä»¶ ==========
            favBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                favList.classList.toggle('show');
                keepList.classList.remove('show');
            });
            
            keepBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                keepList.classList.toggle('show');
                favList.classList.remove('show');
                if(keepList.classList.contains('show')) updateCountdowns();
            });

            document.addEventListener('click', function(e) {
                if(!favBtn.contains(e.target) && !keepBtn.contains(e.target) && 
                   !favList.contains(e.target) && !keepList.contains(e.target)) {
                    favList.classList.remove('show');
                    keepList.classList.remove('show');
                }
            });

            setInterval(() => {
                if(keepList.classList.contains('show')) updateCountdowns();
            }, 1000);

            // ========== äº¤æ˜“æ˜ç´°åˆ—è¡¨æ¸²æŸ“ ==========
            const ITEMS_PER_PAGE = 8;
            let currentPlatformPage = 1;

            function renderTransactionList() {
                const filterType = document.getElementById('platformFilter')?.value || 'all';
                const startDate = new Date(document.getElementById('startDateFilter')?.value || '2025-01-01');
                const endDate = new Date(document.getElementById('endDateFilter')?.value || '2025-04-01');
                endDate.setHours(23, 59, 59, 999);
                
                let filtered = transactions.filter(t => {
                    const tDate = new Date(t.date.split(' ')[0]);
                    if(tDate < startDate || tDate > endDate) return false;
                    if(filterType === 'out') return t.type === 'out';
                    if(filterType === 'in') return t.type === 'in';
                    return true;
                }).sort((a, b) => new Date(b.date) - new Date(a.date));
                
                const sortedAsc = [...filtered].sort((a, b) => new Date(a.date) - new Date(b.date));
                let runningTotal = TOTAL_COIN_ACTUAL;
                const totalMap = new Map();
                
                sortedAsc.forEach(t => {
                    runningTotal += t.impact;
                    totalMap.set(t.date + t.machine + t.impact, runningTotal);
                });
                
                const totalPages = Math.ceil(filtered.length / ITEMS_PER_PAGE) || 1;
                if(currentPlatformPage > totalPages) currentPlatformPage = totalPages;
                const startIdx = (currentPlatformPage - 1) * ITEMS_PER_PAGE;
                const pageItems = filtered.slice(startIdx, startIdx + ITEMS_PER_PAGE);
                
                let html = '<table class="transaction-table">';
                html += '<thead><tr><th>æ™‚é–“</th><th>æ©Ÿå°åç¨±</th><th>å¸¶å…¥/å¸¶å‡º</th><th>åˆè¨ˆ</th></tr></thead><tbody>';
                
                pageItems.forEach(t => {
                    const typeText = t.type === 'in' ? 'å¸¶å…¥' : 'å¸¶å‡º';
                    const typeClass = t.type === 'in' ? 'type-badge in' : 'type-badge out';
                    const amountClass = t.type === 'in' ? 'text-green-400' : 'text-red-400';
                    const amountSign = t.type === 'in' ? `+${t.impact}` : `-${Math.abs(t.impact)}`;
                    const total = totalMap.get(t.date + t.machine + t.impact);
                    
                    html += `<tr>
                        <td class="text-blue-200">${t.date}</td>
                        <td><span class="machine-badge">${t.machine}</span></td>
                        <td><span class="${typeClass}">${typeText}</span> <span class="${amountClass} ml-1">${amountSign}</span></td>
                        <td class="total-amount">${total.toLocaleString()}</td>
                    </tr>`;
                });
                
                html += '</tbody></table>';
                
                if (pageItems.length === 0) {
                    html = '<div class="text-gray-400 p-4 text-center">ç„¡äº¤æ˜“è¨˜éŒ„</div>';
                }
                
                transactionList.innerHTML = html;
                
                let pagiHtml = '';
                for(let i = 1; i <= totalPages; i++) {
                    pagiHtml += `<span class="page-btn ${i === currentPlatformPage ? 'active' : ''}" data-page="${i}">${i}</span>`;
                }
                document.getElementById('platformPagination').innerHTML = pagiHtml;
                
                document.querySelectorAll('#platformPagination .page-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        currentPlatformPage = parseInt(e.target.dataset.page);
                        renderTransactionList();
                    });
                });
            }

            // ========== æ³¨å–®è¨˜éŒ„æ¸²æŸ“ ==========
            const BET_ITEMS_PER_PAGE = 10;
            let currentBetPage = 1;
            let currentSearchTerm = '';

            function renderBetList() {
                let filtered = betRecords;
                if (currentSearchTerm) {
                    const term = currentSearchTerm.toLowerCase();
                    filtered = betRecords.filter(bet => 
                        bet.betId.toLowerCase().includes(term) || 
                        bet.machine.toLowerCase().includes(term)
                    );
                }
                
                const totalPages = Math.ceil(filtered.length / BET_ITEMS_PER_PAGE) || 1;
                if(currentBetPage > totalPages) currentBetPage = totalPages;
                const startIdx = (currentBetPage - 1) * BET_ITEMS_PER_PAGE;
                const pageItems = filtered.slice(startIdx, startIdx + BET_ITEMS_PER_PAGE);
                
                let html = '';
                pageItems.forEach(bet => {
                    const prizeClass = bet.prize.startsWith('+') ? 'prize-positive' : 'prize-negative';
                    const videoClass = bet.videoType === 'BB' ? 'video-badge bb' : 'video-badge rb';
                    
                    html += `<tr>
                        <td class="text-blue-200">${bet.date}</td>
                        <td><span class="bet-machine">${bet.machine}</span></td>
                        <td class="${prizeClass}">${bet.prize}</td>
                        <td>
                            <div class="flex items-center gap-2">
                                <span class="bet-id" onclick="window.openBetDetail('${bet.machine}')">${bet.betId}</span>
                                <span class="${videoClass}" onclick="window.playVideo('${bet.betId}', '${bet.videoType}')">
                                    <i class="fa ${bet.videoType === 'BB' ? 'fa-film' : 'fa-video-camera'}"></i>
                                    ${bet.videoType}
                                </span>
                            </div>
                        </td>
                    </tr>`;
                });
                
                betListBody.innerHTML = html;
                
                let pagiHtml = '';
                for(let i = 1; i <= totalPages; i++) {
                    pagiHtml += `<span class="page-btn ${i === currentBetPage ? 'active' : ''}" data-page="${i}">${i}</span>`;
                }
                betPagination.innerHTML = pagiHtml;
                
                document.querySelectorAll('#betPagination .page-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        currentBetPage = parseInt(e.target.dataset.page);
                        renderBetList();
                    });
                });
            }

            // æœå°‹åŠŸèƒ½
            betSearchBtn.addEventListener('click', () => {
                currentSearchTerm = betSearchInput.value;
                currentBetPage = 1;
                renderBetList();
            });

            betSearchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    currentSearchTerm = betSearchInput.value;
                    currentBetPage = 1;
                    renderBetList();
                }
            });

            // ========== é»æ•¸ UI æ›´æ–° ==========
            const headerPoints = document.getElementById('headerPoints');
            const remainingDisplay = document.getElementById('remainingPointsDisplay');
            const tokenBalanceSpan = document.getElementById('currentTokenBalance');
            const formulaSpan = document.getElementById('formulaHighlight');
            const pointInput = document.getElementById('pointInput');
            
            function updateAllPointsUI() {
                const pointsStr = currentPoints.toLocaleString();
                if(headerPoints) headerPoints.innerText = pointsStr;
                if(remainingDisplay) remainingDisplay.innerText = pointsStr;
                if(tokenBalanceSpan) tokenBalanceSpan.innerText = pointsStr;
                if(formulaSpan) {
                    formulaSpan.innerHTML = `ç¸½ç²å¾— ${TOTAL_COIN_ACTUAL.toLocaleString()} + (å¸¶å‡º+ ${totalOut}) - (å¸¶å…¥- ${totalIn}) = ${currentPoints.toLocaleString()}`;
                }
                if(pointInput) {
                    pointInput.max = Math.max(currentPoints, ...machines.map(m => m.points));
                    pointInput.placeholder = `æœ€å¤š ${currentPoints}`;
                }
                
                renderMachines();
                if(selectedMachine) {
                    const updated = machines.find(m => m.id === selectedMachine.id);
                    if(updated) {
                        selectedMachine.points = updated.points;
                        selectedMachinePoints.textContent = updated.points.toLocaleString();
                    }
                }
            }

            // ========== è¼¸å…¥æ¡†åŠŸèƒ½ ==========
            const maxBtn = document.getElementById('maxBtn');
            const bringInBtn = document.getElementById('bringInBtn');
            const bringOutBtn = document.getElementById('bringOutBtn');

            if(maxBtn) {
                maxBtn.addEventListener('click', () => {
                    if(pointInput) pointInput.value = currentPoints;
                });
            }

            if(bringInBtn) {
                bringInBtn.addEventListener('click', () => {
                    if(!selectedMachine) {
                        alert('è«‹å…ˆé¸æ“‡ä¸€å€‹æ©Ÿå°');
                        return;
                    }
                    
                    const inputVal = parseInt(pointInput.value);
                    if(isNaN(inputVal) || inputVal <= 0) {
                        alert('è«‹è¼¸å…¥æœ‰æ•ˆçš„é»æ•¸');
                        return;
                    }
                    
                    if(inputVal > currentPoints) {
                        alert(`å‰©é¤˜é»æ•¸ä¸è¶³ï¼åªå‰© ${currentPoints} é»`);
                        return;
                    }
                    
                    currentPoints -= inputVal;
                    const machine = machines.find(m => m.id === selectedMachine.id);
                    if(machine) {
                        machine.points += inputVal;
                    }
                    
                    const now = new Date();
                    const dateStr = now.toISOString().split('T')[0] + ' ' + 
                                   now.getHours().toString().padStart(2,'0') + ':' + 
                                   now.getMinutes().toString().padStart(2,'0');
                    
                    transactions.push({
                        date: dateStr,
                        machine: selectedMachine.name,
                        impact: inputVal,
                        type: 'in'
                    });
                    
                    updateAllPointsUI();
                    renderTransactionList();
                    alert(`âœ… å·²å°‡ ${inputVal} é»å¸¶å…¥ ${selectedMachine.name}`);
                    pointInput.value = 1000;
                });
            }

            if(bringOutBtn) {
                bringOutBtn.addEventListener('click', () => {
                    if(!selectedMachine) {
                        alert('è«‹å…ˆé¸æ“‡ä¸€å€‹æ©Ÿå°');
                        return;
                    }
                    
                    const inputVal = parseInt(pointInput.value);
                    if(isNaN(inputVal) || inputVal <= 0) {
                        alert('è«‹è¼¸å…¥æœ‰æ•ˆçš„é»æ•¸');
                        return;
                    }
                    
                    const machine = machines.find(m => m.id === selectedMachine.id);
                    if(!machine) return;
                    
                    if(inputVal > machine.points) {
                        alert(`æ©Ÿå°å…§é»æ•¸ä¸è¶³ï¼åªå‰© ${machine.points} é»`);
                        return;
                    }
                    
                    currentPoints += inputVal;
                    machine.points -= inputVal;
                    
                    const now = new Date();
                    const dateStr = now.toISOString().split('T')[0] + ' ' + 
                                   now.getHours().toString().padStart(2,'0') + ':' + 
                                   now.getMinutes().toString().padStart(2,'0');
                    
                    transactions.push({
                        date: dateStr,
                        machine: selectedMachine.name,
                        impact: -inputVal,
                        type: 'out'
                    });
                    
                    updateAllPointsUI();
                    renderTransactionList();
                    alert(`âœ… å·²å¾ ${selectedMachine.name} å¸¶å‡º ${inputVal} é»`);
                    pointInput.value = 1000;
                });
            }

            // ========== æ¨™ç±¤åˆ‡æ› ==========
            const exchangeSub = document.getElementById('tokenExchangeSub');
            const platformSub = document.getElementById('tokenPlatformSub');
            const exchangeContent = document.getElementById('exchangeContent');
            const platformContent = document.getElementById('platformContent');
            
            if(exchangeSub && platformSub) {
                const newExchangeSub = exchangeSub.cloneNode(true);
                const newPlatformSub = platformSub.cloneNode(true);
                exchangeSub.parentNode.replaceChild(newExchangeSub, exchangeSub);
                platformSub.parentNode.replaceChild(newPlatformSub, platformSub);
                
                const newExchangeSubElement = document.getElementById('tokenExchangeSub');
                const newPlatformSubElement = document.getElementById('tokenPlatformSub');
                
                newExchangeSubElement.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    newExchangeSubElement.classList.add('active');
                    newPlatformSubElement.classList.remove('active');
                    exchangeContent.classList.remove('hidden');
                    platformContent.classList.add('hidden');
                });
                
                newPlatformSubElement.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    newPlatformSubElement.classList.add('active');
                    newExchangeSubElement.classList.remove('active');
                    platformContent.classList.remove('hidden');
                    exchangeContent.classList.add('hidden');
                    
                    currentPlatformPage = 1;
                    renderTransactionList();
                });
            }

            // ç¯©é¸äº‹ä»¶
            const platformFilter = document.getElementById('platformFilter');
            const startDateFilter = document.getElementById('startDateFilter');
            const endDateFilter = document.getElementById('endDateFilter');
            
            if(platformFilter) {
                platformFilter.addEventListener('change', () => {
                    currentPlatformPage = 1;
                    renderTransactionList();
                });
            }
            
            if(startDateFilter) {
                startDateFilter.addEventListener('change', () => {
                    currentPlatformPage = 1;
                    renderTransactionList();
                });
            }
            
            if(endDateFilter) {
                endDateFilter.addEventListener('change', () => {
                    currentPlatformPage = 1;
                    renderTransactionList();
                });
            }

            // ========== å…¶ä»–äº’å‹• ==========
            document.getElementById('closeDrawer')?.addEventListener('click', () => {
                document.getElementById('filterDrawer')?.classList.remove('open');
                document.getElementById('drawerOverlay')?.classList.remove('open');
            });
            
            document.getElementById('drawerOverlay')?.addEventListener('click', () => {
                document.getElementById('filterDrawer')?.classList.remove('open');
                document.getElementById('drawerOverlay')?.classList.remove('open');
            });

            // é ­åƒæ›´æ›
            const avatarImg = document.getElementById('avatarImage');
            const avatarContainer = document.getElementById('avatarContainer');
            const avatars = ['https://i.pravatar.cc/150?img=7','https://i.pravatar.cc/150?img=5','https://i.pravatar.cc/150?img=9','https://i.pravatar.cc/150?img=12'];
            let avatarIdx = 0;
            avatarContainer?.addEventListener('click', () => {
                avatarIdx = (avatarIdx + 1) % avatars.length;
                avatarImg.src = avatars[avatarIdx];
                alert('å¤§é ­ç…§å·²æ›´æ›');
            });

            // æš±ç¨±ç·¨è¼¯
            const displayName = document.getElementById('displayNickname');
            let currentName = 'å¤«äººæœƒç”Ÿæ°£';
            displayName?.addEventListener('click', () => {
                let newName = prompt('ä¿®æ”¹æš±ç¨±', currentName);
                if(newName && newName.trim()) {
                    currentName = newName.trim();
                    displayName.textContent = currentName;
                }
            });

            document.getElementById('exitToHomeBtn')?.addEventListener('click', (e) => {
                e.preventDefault();
                alert('è¿”å›é¦–é ');
            });

            document.getElementById('supportBtn')?.addEventListener('click', () => alert('ğŸ“ å®¢æœèˆ‡å¹«åŠ©'));

            document.getElementById('languageSelect')?.addEventListener('change', function(e) {
                alert(`èªè¨€åˆ‡æ›è‡³ï¼š${this.options[this.selectedIndex].text}`);
            });

            const themeToggle = document.getElementById('themeToggle');
            const body = document.body;
            if(localStorage.getItem('theme') === 'dark') body.classList.add('dark-mode');
            themeToggle?.addEventListener('click', () => {
                body.classList.toggle('dark-mode');
                localStorage.setItem('theme', body.classList.contains('dark-mode') ? 'dark' : 'light');
            });

            const vipPanel = document.getElementById('vipInfoPanel');
            const vipBadge = document.getElementById('vipBadge');
            const expText = document.getElementById('expText');
            
            function toggleVipPanel(e) {
                e.stopPropagation();
                vipPanel.classList.toggle('show');
            }
            
            vipBadge?.addEventListener('click', toggleVipPanel);
            expText?.addEventListener('click', toggleVipPanel);
            
            document.addEventListener('click', function(e) {
                if(!vipPanel?.contains(e.target) && !vipBadge?.contains(e.target) && !expText?.contains(e.target)) {
                    vipPanel?.classList.remove('show');
                }
            });

            const tabs = document.querySelectorAll('.profile-tab');
            const panels = {
                settings: document.getElementById('settingsPanel'),
                token: document.getElementById('tokenPanel'),
                betHistory: document.getElementById('betHistoryPanel')
            };
            
            tabs.forEach(tab => {
                tab.addEventListener('click', (e) => {
                    e.preventDefault();
                    const tabId = tab.dataset.tab;
                    tabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    Object.keys(panels).forEach(key => panels[key]?.classList.add('hidden'));
                    if(panels[tabId]) panels[tabId].classList.remove('hidden');
                    
                    if(tabId === 'betHistory') {
                        currentBetPage = 1;
                        renderBetList();
                    }
                });
            });

            function setupToggle(btnId, sectionId) {
                const btn = document.getElementById(btnId);
                const section = document.getElementById(sectionId);
                if(btn && section) {
                    btn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        btn.classList.toggle('collapsed');
                        section.classList.toggle('collapsed');
                    });
                }
            }
            
            setupToggle('toggleRecharge', 'rechargeDetails');

            // ========== åº•éƒ¨å°èˆªäº®ç‡ˆæ§åˆ¶ - ä¿®æ­£ã€Œæˆ‘çš„ã€äº®ç‡ˆ ==========
            function setCurrentNav() {
                // ç§»é™¤æ‰€æœ‰ nav-item çš„ current-page class
                document.querySelectorAll('.nav-item').forEach(item => {
                    item.classList.remove('current-page');
                });
                
                // ç‚ºã€Œæˆ‘çš„ã€æŒ‰éˆ•åŠ ä¸Š current-page class
                const userNav = document.getElementById('nav-user');
                if (userNav) {
                    userNav.classList.add('current-page');
                }
            }

            // ç›£è½å°èˆªé»æ“Šäº‹ä»¶ï¼ˆä¿ç•™è¦–è¦ºæ•ˆæœï¼‰
            document.querySelectorAll('.nav-item').forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    // é€™è£¡å¯ä»¥åŠ å…¥å…¶ä»–å°èˆªåŠŸèƒ½
                    // ä¾‹å¦‚ï¼šalert('è·³è½‰åˆ° ' + this.dataset.page);
                });
            });

            // åˆå§‹æ¸²æŸ“
            renderFavorites();
            renderKeep();
            renderMachines();
            renderTransactionList();
            renderBetList();
            updateAllPointsUI();
            
            // è¨­å®šåº•éƒ¨å°èˆªäº®ç‡ˆ
            setCurrentNav();

            setInterval(updateAllPointsUI, 200);
        })();
    </script>
</body>
</html>
